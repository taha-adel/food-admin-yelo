"use strict";(self.webpackChunkyelo_dashboard_angular=self.webpackChunkyelo_dashboard_angular||[]).push([[995],{995:(Pe,T,g)=>{g.r(T),g.d(T,{GeofenceModule:()=>Me});var C=g(96814),M=g(15861),f=g(60095);const U={center:{lat:30.741482,lng:76.768066},zoom:18,zoomControl:!0,streetViewControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},mapTypeControlOptions:{position:google.maps.ControlPosition.TOP_CENTER},styles:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}]},N={editable:!0,draggable:!1,strokeColor:"#3468fa",strokeOpacity:.8,strokeWeight:2,fillColor:"#3468fa",fillOpacity:.4};var S=g(8285),e=g(85678),b=g(69862),h=g(20553),_=g(37398),v=g(34243);let w=(()=>{class a{constructor(n,o){this.http=n,this.commonService=o}addGeofence(n,o){const t={access_token:this.commonService.loginData.access_token,user_id:o,marketplace_user_id:this.commonService.loginData.marketplace_user_id,...n};return 1==this.layout_type?this.http.post(`${h.N.api_url}/geofence/addRegion`,t).pipe((0,_.U)(this.commonService.tookanResponse)):this.http.post(`${h.N.api_url}/geofence/v2/addGeofence`,t).pipe((0,_.U)(this.commonService.tookanResponse))}getGeofenceBoundary(n){let o=new b.LE;o=o.append("q",n),o=o.append("polygon_geojson","1"),o=o.append("format","json");try{return this.http.get("https://nominatim.openstreetmap.org/search.php",{params:o})}catch{return[]}}getGeofenceByTomTomBoundary(n){let o=new b.LE;o=o.append("key","lHxDEVu5S2W0qdj0DUkqodFVGwEoIIDc"),o=o.append("geometries",n);try{return this.http.get("https://api.tomtom.com/search/2/additionalData.json",{params:o})}catch{return[]}}getNominatimGeofence(n){let o=new b.LE;o=o.append("key","lHxDEVu5S2W0qdj0DUkqodFVGwEoIIDc"),o=o.append("entityType","Municipality");try{return this.http.get("https://api.tomtom.com/search/2/reverseGeocode/"+n.lat+","+n.lng+".json",{params:o})}catch{return[]}}editGeofence(n,o){const t={access_token:this.commonService.loginData.access_token,user_id:o,marketplace_user_id:this.commonService.loginData.marketplace_user_id,...n};return 1===this.layout_type?(t.user_type=this.commonService.loginData.user_type,t.delivery_methods=this.commonService.deliveryServingType,this.http.post(`${h.N.api_url}/geofence/editRegion`,t).pipe((0,_.U)(this.commonService.tookanResponse))):this.http.post(`${h.N.api_url}/geofence/v2/editGeofence`,t).pipe((0,_.U)(this.commonService.tookanResponse))}getGeofence(n){const o={access_token:this.commonService.loginData.access_token,user_id:n,marketplace_user_id:this.commonService.loginData.marketplace_user_id};return 1==this.layout_type?(o.user_type=this.commonService.loginData.user_type,o.delivery_methods=this.commonService.deliveryServingType,this.http.post(`${h.N.api_url}/geofence/getRegion`,o).pipe((0,_.U)(t=>t))):this.http.post(`${h.N.api_url}/geofence/v2/getGeofence`,o).pipe((0,_.U)(t=>t))}deleteGeofence(n,o){const t={access_token:this.commonService.loginData.access_token,user_id:o,marketplace_user_id:this.commonService.loginData.marketplace_user_id,is_deleted:1};return 1==this.layout_type?(t.user_type=this.commonService.loginData.user_type,t.region_id=n,t.delivery_methods=this.commonService.deliveryServingType,this.http.post(`${h.N.api_url}/geofence/editRegion`,t).pipe((0,_.U)(this.commonService.tookanResponse))):(t.geofence_id=n,this.http.post(`${h.N.api_url}/geofence/v2/editGeofence`,t).pipe((0,_.U)(this.commonService.tookanResponse)))}getGeofenceFromTookan(){return this.http.post(`${h.N.api_url}/city/syncFromTookan`,{access_token:this.commonService.loginData.access_token}).pipe((0,_.U)(this.commonService.tookanResponse))}flightmap_reverse_geocode(n){const t={lat:n.lat,lng:n.lng,user_unique_key:this.commonService.loginData.marketplace_user_id.toString(),language:this.commonService.loginData.language||"en",zoom:"18"};return 1525398==this.commonService.loginData.marketplace_user_id?(t.api_key="AIzaSyAiC0oyq07YyZcJNJ5GRPlTFvhljxy9LGY",t.options=2):t.fm_token=this.commonService.loginData.map_object.dashboard_map_api_key||"5e095000-d05c-11ec-a225-55c1449998e5",this.http.get(`${h.N.maps_api_url}/search_reverse`,{params:new b.LE({fromObject:t})}).pipe((0,_.U)(this.commonService.tookanResponse))}static#e=this.\u0275fac=function(o){return new(o||a)(e.LFG(b.eN),e.LFG(v.v))};static#n=this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac})}return a})();var G=g(58062),u=g(24748),Z=g(4859),E=g(64933),J=g(6507),B=g(76525),I=g(53965);const Q=()=>["/dashboard/settings"],j=()=>["/dashboard/branding/delivery-root"];function K(a,d){if(1&a&&(e.TgZ(0,"div",34)(1,"span",35),e._uU(2),e.qZA(),e.TgZ(3,"span",36),e._uU(4,">"),e.qZA(),e._uU(5,"\n  "),e.TgZ(6,"span",35),e._uU(7),e.qZA(),e._uU(8,"\n  "),e.TgZ(9,"span",36),e._uU(10,">"),e.qZA(),e._uU(11),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.Q6J("routerLink",e.DdM(5,Q)),e.xp6(1),e.Oqu(n.languageStrings.settings||"Settings"),e.xp6(4),e.Q6J("routerLink",e.DdM(6,j)),e.xp6(1),e.Oqu(n.commonService.loginData.terminology.DELIVERY||"Delivery"),e.xp6(4),e.hij("",n.commonService.loginData.terminology.Geofence||"Geofence","\n")}}function V(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"div",37),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.expandMap())}),e._uU(1,"\n            "),e._UZ(2,"i",38),e._uU(3,"\n          "),e.qZA()}}function R(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"div",37),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.expandMap())}),e._uU(1,"\n            "),e._UZ(2,"i",39),e._uU(3,"\n          "),e.qZA()}}function Y(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"li",30),e._uU(1,"\n                    "),e.TgZ(2,"a"),e._uU(3,"\n                      "),e.TgZ(4,"i",40),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.stopMarkRegion())}),e.qZA(),e._uU(5,"\n                      "),e.ynx(6),e._uU(7),e.BQk(),e._uU(8,"\n                    "),e.qZA(),e._uU(9,"\n                  "),e.qZA()}if(2&a){const n=e.oxw();e.xp6(7),e.Oqu(n.languageStrings.Move_Map||"Move Map")}}function $(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"li",41),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.startMarkRegion())}),e._uU(1,"\n                    "),e.TgZ(2,"a"),e._uU(3,"\n                      "),e._UZ(4,"i",42),e._uU(5,"\n                      "),e.ynx(6),e._uU(7),e.BQk(),e._uU(8,"\n                    "),e.qZA(),e._uU(9,"\n                  "),e.qZA()}if(2&a){const n=e.oxw();e.xp6(7),e.Oqu(n.languageStrings.Mark_Region||"Mark Region")}}const H=a=>({"content-border-single":a}),W=a=>({"d-none":a}),k=a=>({direction:a}),X=a=>({"col-md-12":a});let D=(()=>{class a{constructor(n,o,t,i,r,c,s,p,l){this.geofenceService=n,this.formBuilder=o,this.commonService=t,this.customMessage=i,this.route=r,this.confirmationService=c,this.router=s,this.translateService=p,this.ngZone=l,this.drawingManager=new google.maps.drawing.DrawingManager,this.mainPolygons=[],this.merchantSignupType=S.IE,this.editableLayers=[],this.bounds=new google.maps.LatLngBounds,this.drawingManagerOptions={drawingControl:!1,drawingControlOptions:{position:google.maps.ControlPosition.TOP_LEFT,drawingModes:[google.maps.drawing.OverlayType.POLYGON]},polygonOptions:{editable:!0,draggable:!0,strokeWeight:2,fillColor:"#F00",strokeColor:"#F00",fillOpacity:.3},rectangleOptions:{draggable:!0}},this.geofenceOption=[{label:this.commonService.accountTranslationsList.geofence||"Geofence",value:1},{label:this.commonService.accountTranslationsList.city_boundary||"City Boundary",value:2}],this.selectedGeofence=this.geofenceOption[0],this.openstreetCoordinates=[],this.area=0,this.fromGeofencePicker=1,this.languageStrings={},this.defaultMapprKey="5e095000-d05c-11ec-a225-55c1449998e5"}ngOnInit(){var n=this;return(0,M.Z)(function*(){n.is_flight_map=0===n.commonService.loginData.map_object.map_type&&1525398!=n.commonService.loginData.marketplace_user_id,n.mapSearchCtrl=new f.NI,n.direction="ar"===n.commonService.loginData.language||"he"===n.commonService.loginData.language?"rtl":"ltr",n.commonService.langStringsPromise.then(()=>{n.languageStrings=n.commonService.accountTranslationsList}),n.fetchMerchantId(),n.initGeofenceForm(),n.initMap(),yield n.initializeFlightmap(),n.commonService.newAddressAfterDrag.next(n.commonService.loginData.company_address),n.getQueryParams(),n.loadScript("https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js").onload=()=>{}})()}onAddGeofence(){if(this.addGeofenceForm.invalid)this.commonService.validateAllFormFields(this.addGeofenceForm);else{if(this.is_flight_map){if(!this.addedPolygonFlightmap)return void this.customMessage.showMessage({severity:"error",summary:"error",detail:this.languageStrings.Please_add_a_region_first||"Please add a region first."})}else if(!this.addedPolygon)return void this.customMessage.showMessage({severity:"error",summary:"error",detail:this.languageStrings.Please_add_a_region_first||"Please add a region first."});if(this.geoFenceData={region_name:this.addGeofenceForm.controls.name.value,region_description:this.addGeofenceForm.controls.description.value},this.addedPolygon){const o=this.saveFinalShape();if(o.length<3)return void this.customMessage.showMessage({severity:"error",summary:"error",detail:this.languageStrings.Please_add_a_valid_region||"Please add a valid region."});o.push(o[0]),this.geoFenceData.region_data=o.join(",")}else if(this.addedPolygonFlightmap)if(this.onDrag){var n=this.onDragCoordinates;n.push(n[0]),this.geoFenceData.region_data=n.join(",")}else{let o=this.saveFinalShapeFlightmap();if(o.length<3)return void this.customMessage.showMessage({severity:"error",summary:"error",detail:this.languageStrings.Please_add_a_valid_region||"Please add a valid region."});o.push(o[0]),this.geoFenceData.region_data=o.join(",")}this.commonService.showLoader=!0,this.editGeoData?(this.geoFenceData.region_id=this.editGeoData.region_id,this.editGeofence()):this.addGeofence()}}deletePolygonMarkedRegion(){if(this.addedPolygon&&(this.addedPolygon.setMap(null),this.addedPolygon=null,this.hideMapEditingOptions=!1,this.drawingModeOn=!1),this.addedPolygonFlightmap){if(null!=this.drawnItems)if(this.editableMode)this.flightmap.removeLayer(this.editableLayers[0]);else if(this.drawnItems&&this.drawnItems._layers){const n=this.drawnItems._layers,o=Object.keys(n);if(n&&o&&o.length){const t=o[o.length-1];this.flightmap.removeLayer(n[t]),delete n[t]}}this.addedPolygonFlightmap=null,this.addingLayer()}this.hideMapEditingOptions=!1}addingLayer(){this.drawnItems=new L.FeatureGroup,this.flightmap.addLayer(this.drawnItems)}constructPolygonsFlightmap(n,o){var t=this;return(0,M.Z)(function*(){t.mainPolygons=[];var i=t.generateCoordinatesFlightmap(n.region_data);if(o)t.editableMode=!0,(r=L.polygon(i,{color:"red",draggable:!0})).on("dragend",c=>{console.log("dragend",JSON.stringify(c.target.toGeoJSON())),t.onDrag=!0;let s=c.target.toGeoJSON();var p=[];for(let l=0;l<s.geometry.coordinates[0].length;l++)p.push(`${s.geometry.coordinates[0][l][1]} ${s.geometry.coordinates[0][l][0]}`);t.onDragCoordinates=p}),t.drawnItems=new L.FeatureGroup,t.flightmap.addLayer(t.drawnItems),t.editableLayers.push(t.drawnItems),t.addedPolygonFlightmap=n,t.bounds=L.latLngBounds(t.bounds.getSouthWest(),t.bounds.getNorthEast()),t.flightmap.fitBounds(t.bounds,{padding:[50,50]}),t.flightmap.on("load",()=>{t.flightmap.setZoom(0)}),t.drawnItems.addLayer(r),t.flightmap.addLayer(t.drawnItems);else{var r=L.polygon(i,{color:"red"});if(t.drawnItems=new L.FeatureGroup,t.flightmap.addLayer(t.drawnItems),t.addedPolygonFlightmap=n,t.bounds=L.latLngBounds(t.bounds.getSouthWest(),t.bounds.getNorthEast()),t.flightmap.fitBounds(t.bounds,{padding:[50,50]}),t.flightmap.on("load",()=>{t.flightmap.setZoom(0)}),t.drawnItems.addLayer(r),t.drawnItems&&t.drawnItems._layers){const s=t.drawnItems._layers,p=Object.keys(s);s&&p&&p.length&&delete s[p[p.length-1]]}t.flightmap.addLayer(t.drawnItems)}})()}generateCoordinatesFlightmap(n){this.bounds=new L.LatLngBounds;let o=[];return n.forEach(t=>{const r=new L.LatLng(+t.x,+t.y);this.flightmap.panTo(r),this.bounds.extend(r),o.push(r)}),o}stopMarkRegion(){this.is_flight_map?(null!=this.drawnItems&&this.flightmap.removeLayer(this.drawnItems),this.addedPolygonFlightmap=null,this.addingLayer()):(this.drawingManager.setOptions({drawingControl:!1,polygonOptions:N}),this.drawingManager.setDrawingMode(null),this.hideMapEditingOptions=!1,this.drawingModeOn=!1,this.addedPolygon&&this.addedPolygon.setMap(null))}startMarkRegion(){if(this.is_flight_map){if(this.is_flight_map){var n={shapeOptions:{color:"red",icon:new L.DivIcon({iconSize:new L.Point(10,10),className:"leaflet-div-icon leaflet-editing-icon my-own-class"})}};new L.Draw.Polygon(this.flightmap,n).enable(),this.flightmap.on(L.Draw.Event.CREATED,t=>{console.log(t);var i=t.layerType,r=t.layer,c=L.stamp(r);r.feature={type:"Feature",properties:{_leaflet_id:c,feature_type:t.layerType}},"function"==typeof r.getRadius&&(r.feature.properties.radius=r.getRadius()),console.log("Drawn Shapes ["+i+"]: "+JSON.stringify(r.toGeoJSON())),this.updateShapeFlightmap(r.toGeoJSON()),this.hideMapEditingOptions=!0,"marker"===i&&r.bindPopup("Coordinates: "+r._latlng),r.on("dragstart",function(s){console.log("dragstart: "+JSON.stringify(s.target.toGeoJSON()))}),r.on("dragend",function(s){console.log("dragend: distance = "+s.distance+", object = "+JSON.stringify(s.target.toGeoJSON()))}),this.drawnItems.addLayer(r)})}}else{if(this.drawingModeOn)return;this.drawingManager=new google.maps.drawing.DrawingManager(this.drawingManagerOptions),this.drawingManager.setMap(this.map),this.drawingManager.setDrawingMode(google.maps.drawing.OverlayType.POLYGON),this.drawingModeOn=!0,google.maps.event.addListener(this.drawingManager,"polygoncomplete",t=>{this.updateShape(t,"polygoncomplete"),t.getPaths().forEach(i=>{google.maps.event.addListener(i,"insert_at",()=>{this.updateShape(t,"insert_at")}),google.maps.event.addListener(i,"remove_at",()=>{this.updateShape(t,"remove_at")}),google.maps.event.addListener(i,"set_at",()=>{this.updateShape(t,"set_at")}),google.maps.event.addListener(t,"dragend",()=>{this.updateShape(t,"dragend")})})})}}updateShapeFlightmap(n){this.addedPolygonFlightmap=n}saveFinalShapeFlightmap(){var t,n=[],o=[];if(this.addedPolygonFlightmap.geometry){t=this.addedPolygonFlightmap.geometry.coordinates;for(let i=0;i<t[0].length;i++)n.push(`${t[0][i][1]} ${t[0][i][0]}`)}else if(this.openstreetCoordinates.length>0){t=this.openstreetCoordinates;for(let i=0;i<t.length;i++)n.push(`${t[i][1]} ${t[i][0]}`)}else{this.addedPolygonFlightmap.region_data.forEach(i=>{var r=[];r.push(+i.x),r.push(+i.y),o.push(r)}),t=o;for(let i=0;i<t.length;i++)n.push(`${t[i][0]} ${t[i][1]}`)}return n}fetchMerchantId(){this.route.params.subscribe(n=>{this.merchantId=n.merchant_id})}changeGeofenceType(n){this.confirmationService.confirm({header:this.languageStrings.Confirm||"Confirm",message:this.languageStrings.by_selecting_this_option_you_may_lose_the_previous_drawn_geofence||"By selecting this option you may lose the previous drawn geofence",confirmBtnText:this.languageStrings.Confirm||"Confirm",accept:()=>{this.clearMap()},reject:()=>{this.closeConfirmation(n.value)}})}initMap(){this.is_flight_map||(this.map=new google.maps.Map(document.getElementById("geofence-map"),U))}updateAddress(n){this.is_flight_map?this.geofenceService.flightmap_reverse_geocode(n).subscribe(o=>{o&&o.data&&o.data.address&&this.commonService.newAddressAfterDrag.next(o.data.address)},o=>{this.commonService.handleError(o)}):this.commonService.newAddressAfterDrag.next(n)}listenMarkerDrag(){google.maps.event.addListener(this.marker,"dragend",()=>{this.geocodePosition(this.marker.getPosition())})}geocodePosition(n){(new google.maps.Geocoder).geocode({location:n},(t,i)=>{this.ngZone.run(()=>{"OK"===i.toString()&&this.updateAddress(t[0].formatted_address)})})}updateGoogleMapPinMarker(n){n&&(this.marker&&this.marker.setMap(null),this.marker=new google.maps.Marker({position:n,map:this.map,optimized:!1,draggable:!0}),this.listenMarkerDrag())}updatePinMarker(n){this.is_flight_map?(this.marker.setLatLng([n.lat,n.lng]),this.flightmap.setView([n.lat,n.lng],16)):n&&this.updateGoogleMapPinMarker(n)}initializeFlightmap(){var n=this;let o=this.commonService.loginData.company_latitude?this.commonService.loginData.company_latitude:30.741482,t=this.commonService.loginData.company_longitude?this.commonService.loginData.company_longitude:76.768066;return new Promise(function(){var i=(0,M.Z)(function*(r,c){if(!n.is_flight_map){let O={lat:Number(o),lng:Number(t)};return n.updateGoogleMapPinMarker(O),r(!0)}yield n.commonService.loadFlightmapGeofenceScripts();const s={};s.fm_token=n.commonService.loginData.map_object.dashboard_map_api_key||n.defaultMapprKey,s.style_name="default.json";var p=new JungleMaps("JungleMap",s);n.flightmap=new L.map("geofence-map",{attributionControl:!0,zoomControl:!1,center:new L.LatLng(o,t),zoom:13,minZoom:5,fullscreenControl:!0,fullscreenControlOptions:{position:"topleft"}});let l=yield p.getLayer();n.flightmap.addLayer(l),n.addingLayer(),n.flightmap.addControl(L.control.zoom({position:"topright"})),n.flightmap.on("load",()=>{n.flightmap.addControl(L.control.Fullscreen({position:"topleft"}))});const y=L.icon({iconUrl:"https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi2.png",iconSize:[17,27],iconAnchor:[13,43]});n.marker=L.marker([o,t],{icon:y,draggable:!0}),n.flightmap.addLayer(n.marker),n.marker.on("dragend",O=>{var m=O.target.getLatLng();n.updateAddress(m)}),r(!0)});return function(r,c){return i.apply(this,arguments)}}())}getQueryParams(){this.route.queryParams.subscribe(n=>{if(n&&n.delivery&&(this.commonService.deliveryServingType=n.delivery),null!=n&&n.region_id){const o=this.geofenceService.geofenceList.findIndex(t=>t.region_id===Number(n.region_id));-1!==o?(this.editGeoData=this.geofenceService.geofenceList[o],this.setPreviewData(),this.setGeofenceData()):1==this.geofenceService.layout_type?this.router.navigate(["/dashboard/geofence/list/"+this.merchantId],{queryParams:{delivery:this.commonService.deliveryServingType}}):this.router.navigate(["/dashboard/geofence/list/"+this.merchantId+"/city"])}else this.setPreviewData()})}initGeofenceForm(){this.addGeofenceForm=this.formBuilder.group({name:["",f.kI.required],description:[""]})}addGeofence(){const n=this.selectedGeofence===this.geofenceOption[1]?2:1,o={access_token:this.commonService.loginData.access_token,user_id:this.merchantId,marketplace_user_id:this.commonService.loginData.marketplace_user_id};1==this.geofenceService.layout_type?(o.region_name=this.geoFenceData.region_name,o.region_description=this.geoFenceData.region_description,o.region_data=this.geoFenceData.region_data,o.region_type=n,o.delivery_methods=this.commonService.deliveryServingType,o.user_type=this.commonService.loginData.user_type):(o.geofence_name=this.geoFenceData.region_name,o.geofence_description=this.geoFenceData.region_description,o.geofence_data=this.geoFenceData.region_data),this.geofenceService.addGeofence(o,this.merchantId).subscribe(t=>{this.customMessage.showMessage({severity:"success",detail:t.message}),this.commonService.showLoader=!1,1==this.geofenceService.layout_type?this.router.navigate(["/dashboard/geofence/list/"+this.merchantId],{queryParams:{delivery:this.commonService.deliveryServingType}}):this.router.navigate(["/dashboard/geofence/list/"+this.merchantId+"/city"])},t=>{this.commonService.showLoader=!1,this.commonService.handleError(t)})}editGeofence(){this.hideMapEditingOptions=!1;let n={};1===this.geofenceService.layout_type?(n=this.geoFenceData,n.delivery_methods=this.commonService.deliveryServingType):(n.geofence_name=this.geoFenceData.region_name,n.geofence_description=this.geoFenceData.region_description,n.geofence_data=this.geoFenceData.region_data,n.geofence_id=this.geoFenceData.region_id),this.geofenceService.editGeofence(n,this.merchantId).subscribe(o=>{this.customMessage.showMessage({severity:"success",detail:o.message}),this.commonService.showLoader=!1,this.router.navigate(1==this.geofenceService.layout_type?["/dashboard/geofence/list/"+this.merchantId]:["/dashboard/geofence/list/"+this.merchantId+"/city"])},o=>{this.commonService.showLoader=!1,this.commonService.handleError(o)})}updateShape(n,o){this.addedPolygon=n,"polygoncomplete"===o&&(this.hideMapEditingOptions=!0,this.drawingModeOn=!0,this.drawingManager.setMap(null)),console.log("COOORDINATES"+this.saveFinalShape())}saveFinalShape(){const n=this.addedPolygon.getPath(),o=[];return n.forEach(t=>{o.push(`${t.lat()} ${t.lng()}`)}),o}loadScript(n){const o=document.body,t=document.createElement("script");return t.innerHTML="",t.src=n,t.async=!0,t.defer=!1,o.appendChild(t),t}setGeofenceData(){this.addGeofenceForm.setValue({name:this.editGeoData.region_name,description:this.editGeoData.region_description}),this.is_flight_map?this.constructPolygonsFlightmap(this.editGeoData,!0):this.constructPolygons(this.editGeoData,!0),this.hideMapEditingOptions=!0,this.drawingModeOn=!0}setPreviewData(){this.geofenceService.geofenceList.length>0&&(this.hideMapEditingOptions=!1,this.geofenceService.geofenceList.forEach(this.is_flight_map?n=>{(!this.editGeoData||n.region_id!==this.editGeoData.region_id)&&this.constructPolygonsFlightmap(n)}:n=>{(!this.editGeoData||n.region_id!==this.editGeoData.region_id)&&this.constructPolygons(n)}))}constructPolygons(n,o){if(this.mainPolygons=[],n.region_data){const t=this.generateCoordinates(n.region_data);let i;if(o){const r={...this.drawingManagerOptions.polygonOptions};r.paths=t,i=new google.maps.Polygon(r),this.addedPolygon=i}else i=new google.maps.Polygon({paths:t,strokeColor:"#3468fa",strokeOpacity:.8,strokeWeight:2,fillColor:"#3468fa",fillOpacity:.4,draggable:!1,editable:!1});this.mainPolygons.push(i),i.setMap(this.map)}this.map.fitBounds(this.bounds)}constructFlightmapBoundaryPolygons(n){this.mainPolygons=[];var o=L.polygon(n,{color:"blue"});this.drawnItems=new L.FeatureGroup,this.flightmap.addLayer(this.drawnItems),this.addedPolygonFlightmap=n,this.bounds=L.latLngBounds(this.bounds.getSouthWest(),this.bounds.getNorthEast()),this.flightmap.fitBounds(this.bounds,{padding:[2,2]}),this.drawnItems.addLayer(o),this.flightmap.addLayer(this.drawnItems),this.commonService.showLoader=!1}generateCoordinates(n){const o=[];return n.forEach(t=>{const r=new google.maps.LatLng(+t.x,+t.y);this.bounds.extend(r),o.push(r)}),o}generateBoundaryCoordinates(n){this.drawingManager=new google.maps.drawing.DrawingManager(this.drawingManagerOptions),this.drawingManager.setMap(this.map),this.drawingManager.setDrawingMode(google.maps.drawing.OverlayType.POLYGON),this.drawingModeOn=!0;const o=[];n.forEach(t=>{const i=new google.maps.LatLng(t[1],t[0]);this.bounds.extend(i),o.push(i)}),this.constructBoundaryPolygons(o,!0)}constructBoundaryPolygons(n,o){if(this.mainPolygons=[],n){let t;if(o){const i={...this.drawingManagerOptions.polygonOptions};i.strokeWeight=1,i.paths=n,t=new google.maps.Polygon(i)}else t=new google.maps.Polygon({paths:n,strokeColor:"#3468fa",strokeOpacity:.8,strokeWeight:2,fillColor:"#3468fa",fillOpacity:.4,draggable:!1,editable:!1});t.setMap(this.map),o&&this.area<=google.maps.geometry.spherical.computeArea(t.getPath())&&(this.addedPolygon=t,this.area=google.maps.geometry.spherical.computeArea(t.getPath()))}this.map.fitBounds(this.bounds)}closeConfirmation(n){2==n.value&&this.selectedGeofence===this.geofenceOption[1]?this.selectedGeofence=this.geofenceOption[0]:1===n.value&&this.selectedGeofence===this.geofenceOption[0]&&(this.selectedGeofence=this.geofenceOption[1]),this.selectedGeofence={...this.selectedGeofence}}clearMap(){this.addedPolygon&&(this.addedPolygon.setMap(null),this.bounds=new google.maps.LatLngBounds,this.map.fitBounds(this.bounds),this.addedPolygon=null),this.is_flight_map&&(null!=this.drawnItems&&this.flightmap.removeLayer(this.drawnItems),this.addedPolygonFlightmap=null)}onLatLngEvent(n){var o=this;return(0,M.Z)(function*(){if(o.openstreetCoordinates=[],o.is_flight_map){if(o.updatePinMarker({lat:n.lat,lng:n.lng}),o.selectedGeofence===o.geofenceOption[1]){if(o.clearMap(),n&&n.lat&&n.lng){const t={lat:n.lat,lng:n.lng};o.commonService.showLoader=!0,o.geofenceService.getNominatimGeofence(t).subscribe(i=>{let r;i.addresses[0]&&i.addresses[0].dataSources&&i.addresses[0].dataSources.geometry.id&&(r=i.addresses[0].dataSources.geometry.id),r?o.geofenceService.getGeofenceByTomTomBoundary(r).subscribe(c=>{c.additionalData[0]&&c.additionalData[0].geometryData.features[0]&&"Polygon"==c.additionalData[0].geometryData.features[0].geometry.type?(o.openstreetCoordinates=c.additionalData[0].geometryData.features[0].geometry.coordinates[0],o.generateFlightmapBoundaryCoordinates(c.additionalData[0].geometryData.features[0].geometry.coordinates[0])):(o.commonService.showLoader=!1,o.customMessage.showMessage({severity:"error",detail:o.translateService.translate("Unavailable to identify the entered location please enter a different location to continue")}))},c=>{o.commonService.showLoader=!1,o.customMessage.showMessage({severity:"error",detail:o.translateService.translate("Unavailable to identify the entered location please enter a different location to continue")})}):(o.commonService.showLoader=!1,o.customMessage.showMessage({severity:"error",detail:o.translateService.translate("Unavailable to identify the entered location please enter a different location to continue")}))})}}else if(n&&n.lat&&n.lng){const t=new L.LatLng(+n.lat,n.lng);o.flightmap.panTo(t)}}else o.updatePinMarker(n),o.selectedGeofence===o.geofenceOption[1]?(o.clearMap(),o.addedPolygon&&(o.addedPolygon.setMap(null),o.bounds=new google.maps.LatLngBounds,o.map.fitBounds(o.bounds)),o.map.setCenter(n),(new google.maps.Geocoder).geocode({location:n},(i,r)=>{if(r==google.maps.GeocoderStatus.OK){let c=i[0].address_components;c=o.getAddressCity(c),o.geofenceService.getGeofenceBoundary(c).subscribe(s=>{s.forEach(function(){var p=(0,M.Z)(function*(l){let y;l.geojson.type.includes("Polygon")&&(y=1===l.geojson.coordinates[0].filter(Array.isArray).length?[].concat(...l.geojson.coordinates[0]):l.geojson.coordinates[0],o.generateBoundaryCoordinates(y))});return function(l){return p.apply(this,arguments)}}())})}})):o.map.setCenter(n)})()}generateFlightmapBoundaryCoordinates(n){this.bounds=new L.LatLngBounds;let o=[];n.forEach(t=>{const i=new L.LatLng(t[1],t[0]);this.flightmap.panTo(i),this.bounds.extend(i),o.push(i)}),this.constructFlightmapBoundaryPolygons(o)}getArea(n){let o=[];return n.forEach(i=>{const r=new L.LatLng(i[1],i[0]);o.push(r)}),L.GeometryUtil.geodesicArea(o)}getAddressCity(n){let r=" ",c=" ",s=" ";const p=n.map(m=>m);let l=p.filter(m=>"political"===m.types[1]&&"locality"===m.types[0]);l.length>0&&(r=l[l.length-1].long_name);let y=p.filter(m=>"political"===m.types[1]&&"administrative_area_level_1"===m.types[0]);y.length>0&&(s=y[y.length-1].long_name);let O=p.filter(m=>"political"===m.types[1]&&"country"===m.types[0]);return O.length>0&&(c=O[O.length-1].long_name),r+" "+s+" "+c}expandMap(){this.isExpandedMap=!this.isExpandedMap,google.maps.event.trigger(this.map,"resize")}back(){2==this.geofenceService.layout_type?this.router.navigate(["/dashboard/geofence/list/"+this.merchantId+"/city"]):this.router.navigate(["/dashboard/geofence/list/"+this.merchantId],{queryParams:{delivery:this.commonService.deliveryServingType}})}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(w),e.Y36(f.qu),e.Y36(v.v),e.Y36(G.S),e.Y36(u.gz),e.Y36(Z.Y),e.Y36(u.F0),e.Y36(E.s),e.Y36(e.R0b))};static#n=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-geofence-picker"]],decls:125,vars:39,consts:[["class","route","style","font-size: 12px;font-weight: bold;margin-bottom: 10px;",4,"ngIf"],[1,"content-container","p-0"],[3,"ngClass"],[1,"geofence","d-flex","flex-column"],[1,"geofence-head","mb-30"],[1,"heading-l1","text-capitalize"],["optionLabel","label",3,"options","ngModel","ngModelChange","onChange"],[1,"row","geofence-body"],[1,"col-12","col-md-4",3,"ngClass"],[1,"geofence-form","d-flex","flex-column","justify-content-between"],[1,"fancy-form",3,"formGroup"],[1,"form-group",3,"ngStyle"],[1,"heading-l2."],[1,"error-star"],["type","text","formControlName","name"],[3,"control"],["rows","4","formControlName","description"],[1,"geofence-form-footer","d-flex","flex-row-reverse"],["type","button",1,"btn","btn-yl-primary",3,"ngStyle","click"],["type","button",1,"btn","btn-yl-secondary","u-mr-5",3,"ngStyle","click"],[1,"col-12","col-md-8","map-holder",3,"ngClass"],["id","geofence-map"],["class","map-expand",3,"click",4,"ngIf"],[1,"map-option"],[1,"col-sm-12"],[1,"search-wrapper","fancy-search","fullwidth"],[1,"tf","search"],[3,"formControl","customPlaceholder","latLng"],[1,"fullwidth","p-0"],[1,"nav","mb-1"],[1,"proxima-thin"],[1,"tf","tf-delete",3,"click"],["class","proxima-thin",4,"ngIf"],["class","proxima-thin",3,"click",4,"ngIf"],[1,"route",2,"font-size","12px","font-weight","bold","margin-bottom","10px"],[2,"color","#377dff","cursor","pointer",3,"routerLink"],[2,"padding","0 3px"],[1,"map-expand",3,"click"],[1,"fa","fa-angle-left"],[1,"fa","fa-angle-right"],[1,"tf","tf-move",3,"click"],[1,"proxima-thin",3,"click"],[1,"tf","tf-region"]],template:function(o,t){1&o&&(e.YNc(0,K,12,7,"div",0),e._uU(1,"\n"),e.TgZ(2,"div",1),e._uU(3,"\n  "),e.TgZ(4,"section",2),e._uU(5,"\n    "),e.TgZ(6,"div",3),e._uU(7,"\n      "),e.TgZ(8,"div",4),e._uU(9,"\n        "),e.TgZ(10,"label",5),e._uU(11,"\n          "),e.ynx(12),e._uU(13),e.BQk(),e._uU(14,"\n        "),e.qZA(),e._uU(15,"\n        "),e.TgZ(16,"div"),e._uU(17,"\n            "),e.TgZ(18,"label",5),e._uU(19,"\n                "),e.ynx(20),e._uU(21),e.BQk(),e._uU(22,"\n              "),e.qZA(),e._uU(23,"\n              "),e.TgZ(24,"p-dropdown",6),e.NdJ("ngModelChange",function(r){return t.selectedGeofence=r})("onChange",function(r){return t.changeGeofenceType(r)}),e.qZA(),e._uU(25,"\n        "),e.qZA(),e._uU(26,"\n      "),e.qZA(),e._uU(27,"\n      "),e.TgZ(28,"div",7),e._uU(29,"\n        "),e.TgZ(30,"div",8),e._uU(31,"\n          "),e.TgZ(32,"div",9),e._uU(33,"\n            "),e.TgZ(34,"form",10),e._uU(35,"\n              "),e.TgZ(36,"div",11),e._uU(37,"\n                "),e.TgZ(38,"label",12),e._uU(39,"\n                  "),e.ynx(40),e._uU(41),e.BQk(),e._uU(42,"\n                  "),e.TgZ(43,"span",13),e._uU(44,"*"),e.qZA(),e._uU(45,"\n                "),e.qZA(),e._uU(46,"\n                "),e._UZ(47,"input",14),e._uU(48,"\n                "),e._UZ(49,"control-messages",15),e._uU(50,"\n              "),e.qZA(),e._uU(51,"\n              "),e.TgZ(52,"div",11),e._uU(53,"\n                "),e.TgZ(54,"label",12),e._uU(55,"\n                  "),e.ynx(56),e._uU(57),e.BQk(),e._uU(58,"\n                  "),e._uU(59,"\n                "),e.qZA(),e._uU(60,"\n                "),e._UZ(61,"textarea",16),e._uU(62,"\n                "),e._uU(63,"\n              "),e.qZA(),e._uU(64,"\n            "),e.qZA(),e._uU(65,"\n            "),e.TgZ(66,"div",17),e._uU(67,"\n              "),e.TgZ(68,"button",18),e.NdJ("click",function(){return t.onAddGeofence()}),e._uU(69),e.qZA(),e._uU(70,"\n              "),e.TgZ(71,"button",19),e.NdJ("click",function(){return t.back()}),e._uU(72),e.qZA(),e._uU(73,"\n            "),e.qZA(),e._uU(74,"\n          "),e.qZA(),e._uU(75,"\n        "),e.qZA(),e._uU(76,"\n        "),e.TgZ(77,"div",20),e._uU(78,"\n          "),e._UZ(79,"div",21),e._uU(80,"\n          "),e.YNc(81,V,4,0,"div",22),e._uU(82,"\n          "),e.YNc(83,R,4,0,"div",22),e._uU(84,"\n          "),e._uU(85,"\n          "),e.TgZ(86,"div",23),e._uU(87,"\n            "),e.TgZ(88,"div",24),e._uU(89,"\n              "),e.TgZ(90,"div",25),e._uU(91,"\n                "),e._UZ(92,"span",26),e._uU(93,"\n                "),e.TgZ(94,"app-autocomplete",27),e.NdJ("latLng",function(r){return t.onLatLngEvent(r)}),e.qZA(),e._uU(95,"\n              "),e.qZA(),e._uU(96,"\n              "),e.TgZ(97,"div",28),e._uU(98,"\n                "),e.TgZ(99,"ul",29),e._uU(100,"\n                  "),e.TgZ(101,"li",30),e._uU(102,"\n                    "),e.TgZ(103,"a"),e._uU(104,"\n                      "),e.TgZ(105,"i",31),e.NdJ("click",function(){return t.deletePolygonMarkedRegion()}),e.qZA(),e._uU(106,"\n                      "),e.ynx(107),e._uU(108),e.BQk(),e._uU(109,"\n                    "),e.qZA(),e._uU(110,"\n                  "),e.qZA(),e._uU(111,"\n                  "),e.YNc(112,Y,10,1,"li",32),e._uU(113,"\n                  "),e.YNc(114,$,10,1,"li",33),e._uU(115,"\n                "),e.qZA(),e._uU(116,"\n              "),e.qZA(),e._uU(117,"\n            "),e.qZA(),e._uU(118,"\n          "),e.qZA(),e._uU(119,"\n        "),e.qZA(),e._uU(120,"\n      "),e.qZA(),e._uU(121,"\n    "),e.qZA(),e._uU(122,"\n  "),e.qZA(),e._uU(123,"\n"),e.qZA(),e._uU(124,"\n")),2&o&&(e.Q6J("ngIf",t.commonService.loginData.is_product_line_type===t.merchantSignupType.SINGLE_ADMIN_SINGLE_STORE),e.xp6(4),e.Q6J("ngClass",e.VKq(25,H,t.commonService.loginData.is_product_line_type===t.merchantSignupType.SINGLE_ADMIN_SINGLE_STORE)),e.xp6(9),e.Oqu(t.languageStrings.Add_Geofence||"Add Geofence"),e.xp6(8),e.Oqu(t.languageStrings.Select_Geofence_Type||"Select Geofence Type"),e.xp6(3),e.Q6J("options",t.geofenceOption)("ngModel",t.selectedGeofence),e.xp6(6),e.Q6J("ngClass",e.VKq(27,W,t.isExpandedMap)),e.xp6(4),e.Q6J("formGroup",t.addGeofenceForm),e.xp6(2),e.Q6J("ngStyle",e.VKq(29,k,t.direction)),e.xp6(5),e.Oqu(t.languageStrings.Region_Name||"Region Name"),e.xp6(8),e.Q6J("control",t.addGeofenceForm.controls.name),e.xp6(3),e.Q6J("ngStyle",e.VKq(31,k,t.direction)),e.xp6(5),e.Oqu(t.languageStrings.Region_Description||"Region Description"),e.xp6(11),e.Q6J("ngStyle",e.VKq(33,k,t.direction)),e.xp6(1),e.Oqu(t.languageStrings.Save||"Save"),e.xp6(2),e.Q6J("ngStyle",e.VKq(35,k,t.direction)),e.xp6(1),e.Oqu(t.languageStrings.Cancel||"Cancel"),e.xp6(5),e.Q6J("ngClass",e.VKq(37,X,t.isExpandedMap)),e.xp6(4),e.Q6J("ngIf",!t.isExpandedMap),e.xp6(2),e.Q6J("ngIf",t.isExpandedMap),e.xp6(11),e.Q6J("formControl",t.mapSearchCtrl)("customPlaceholder",t.languageStrings.Search_Map||"Search Map"),e.xp6(14),e.Oqu(t.languageStrings.Clear_Region||"Clear Region"),e.xp6(4),e.Q6J("ngIf",!t.hideMapEditingOptions),e.xp6(2),e.Q6J("ngIf",!t.hideMapEditingOptions))},dependencies:[C.mk,C.O5,C.PC,u.rH,f._Y,f.Fj,f.JJ,f.JL,f.oH,f.sg,f.u,f.On,J.m,B.Y,I.Lt],styles:[".fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(.ui-dropdown-label):not([class*=col-]), .fancy-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not([class*=col-]), .panel-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-transform:uppercase;display:block;font-size:12px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;color:#9b9b9b;margin-bottom:6px;padding:0 10px 0 0}.fancy-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .fancy-modal[_ngcontent-%COMP%]   .form-control.ui-select-container[_ngcontent-%COMP%], .fancy-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .fancy-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .fancy-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:0 0;border:none;outline:0;border:1px solid #ddd;width:100%;border-radius:6px;font-size:1rem;padding:9px;line-height:normal;color:#474747;font-family:Inter;letter-spacing:.9px;position:relative;background-color:#fff}.fancy-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled, .fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled, .fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled, .fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled, .fancy-modal[_ngcontent-%COMP%]   .form-control.ui-select-container[_ngcontent-%COMP%]:disabled, .fancy-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled, .fancy-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{cursor:not-allowed;background:var(--gray);opacity:.5}.fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-moz-placeholder{opacity:.5;font-family:Inter;font-size:15px;text-align:left;color:var(--gray-dark)}.fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:-webkit-input-placeholder{opacity:.5;font-family:Inter;font-size:15px;text-align:left;color:var(--gray-dark)}.fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{opacity:.5;font-family:Inter;font-size:15px;text-align:left;color:var(--gray-dark)}.fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{opacity:.5;font-family:Inter;font-size:15px;text-align:left;color:var(--gray-dark)}.fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{opacity:.5;font-family:Inter;font-size:15px;text-align:left;color:var(--gray-dark)}.fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-moz-placeholder{opacity:.5;font-family:Inter;font-size:15px;text-align:left;color:var(--gray-dark)}.fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{opacity:.5;font-family:Inter;font-size:15px;text-align:left;color:var(--gray-dark)}.fancy-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:-ms-input-placeholder{opacity:.5;font-family:Inter;font-size:15px;text-align:left;color:var(--gray-dark)}.material-icon-delete[_ngcontent-%COMP%], .material-icon-edit[_ngcontent-%COMP%], .material-icon-save[_ngcontent-%COMP%]{color:#474747;cursor:pointer;font-size:20px}.material-icon-delete[_ngcontent-%COMP%]:hover, .material-icon-edit[_ngcontent-%COMP%]:hover, .material-icon-save[_ngcontent-%COMP%]:hover{color:var(--blue)}[_ngcontent-%COMP%]:root{--blue: #0f172a;--black: #282828;--red: Red;--gray: #e2e4e6;--gray-dark: #979797;--gray-light: #585858;--light-gray: #d3d3d3;--orange: #ff8f00;--white: #ffffff;--light-black: #282828;--sidebar-black: #1c1c1c;--sidebar-hover-black: #282828;--light-gray-back: #f7f7f7;--dark-gray-back: #ecebeb;--graph-label: #2496ff;--graph-fill: #e0a7a7;--light-background: #f9f9f9;--blue-light: #f4f6f8;--pink: #f7b8ae}.geofence[_ngcontent-%COMP%]   .geofence-form[_ngcontent-%COMP%]{height:100%}.map-expand[_ngcontent-%COMP%]{position:absolute;width:35px;height:39px;text-align:center;padding:3px;background:#717171;z-index:1;color:var(--white);cursor:pointer!important;border-radius:0 0 4px;margin-right:-50px;font-size:23px;top:0}@media screen and (max-width: 768px){.map-expand[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]     .map-card .gm-style .gmnoprint{display:none}[_nghost-%COMP%]     .leaflet-div-icon{background:#fff;border:1px solid #666;width:12px!important;height:12px!important;border-width:1px;border-style:solid;border-radius:15px;border-color:red;background-color:#fff;margin-top:-8px!important}.content-border-single[_ngcontent-%COMP%]{padding-left:8px!important}@media only screen and (max-width: 991px){.route[_ngcontent-%COMP%]{display:none!important}}",'.menu-box[_ngcontent-%COMP%]{display:inline-block;position:relative;cursor:pointer}.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{justify-content:center;position:absolute;border:1px solid var(--gray);z-index:5;background:var(--white);width:115px;padding-left:0;padding-top:5px;padding-bottom:5px;list-style:none;box-shadow:0 6px 12px var(--gray);display:none;text-align:center;min-width:110px;left:auto;top:100%;margin:2px 0 0;font-size:14px;background-clip:padding-box;border-radius:4px}.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;color:var(--black)}.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--black);display:block;width:100%;text-align:left;padding:10px;height:35px;border-left:3px solid transparent;line-height:1;clear:both;font-weight:400;white-space:normal;font-size:14px}.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:right}.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.yf[_ngcontent-%COMP%]{font-size:px}.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--blue);border-left:3px solid var(--blue)}.menu-box[_ngcontent-%COMP%]:hover   .menu-list[_ngcontent-%COMP%]{display:block}.menu-list[_ngcontent-%COMP%]:before{content:" ";border:9px solid transparent;position:absolute;bottom:100%;border-bottom:7px solid var(--gray);right:2px}.menu-list[_ngcontent-%COMP%]:after{content:" ";border:9px solid transparent;position:absolute;bottom:100%;border-bottom:7px solid transparent;right:0;width:100%}.menu-list[_ngcontent-%COMP%]::hover{border-left:3px solid var(--blue)}@media (min-width: 768px){.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{right:0}}@media screen and (max-width: 640px){.menu-list[_ngcontent-%COMP%]:before{left:2px;right:inherit}}@media (max-width: 768px){.customers[_ngcontent-%COMP%]   tr.body-row[_ngcontent-%COMP%]   .menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{margin-left:-3px;top:-190px}.customers[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]:before{content:" ";border:9px solid transparent;position:absolute;bottom:0;right:100%;border-top:7px solid var(--gray);right:px;right:90px;bottom:-18px}.customers[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]:after{content:" ";border:9px solid transparent;position:absolute;bottom:0;border-top:7px solid transparent;right:100%;width:100%}}.check-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:9}.check-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{border-radius:110px;border:solid 1.1px rgba(151,151,151,.53);width:17px;height:17px;display:inline-block;position:relative;text-align:center;vertical-align:middle;margin-top:-3px;transition:all .25s ease;color:#fff}.check-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background-color:var(--blue);border:solid 1.1px transparent;color:#fff}.check-radio[_ngcontent-%COMP%]   span.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:2;width:100%;height:100%;background:rgba(255,255,255,.67)}.check-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%] + span.overlay[_ngcontent-%COMP%]{box-shadow:0 5px 15px 4px #00000026;background:transparent}.check-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]:after{content:"\\e92a";position:absolute;top:0;left:0;right:0;opacity:0;line-height:16px;font-size:8px}.check-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:after{animation:load8 .5s;opacity:1}.radio-ck-label[_ngcontent-%COMP%]{font-size:14px}.checkbox-box[_ngcontent-%COMP%]{position:relative;border:1px solid #ddd;padding:9px 20px;border-radius:4px;display:flex;justify-content:flex-start;align-items:center;-webkit-user-select:none;user-select:none;font-family:Inter;cursor:pointer}.checkbox-box[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.checkbox-box[_ngcontent-%COMP%]   .radio-ck-label[_ngcontent-%COMP%]{margin:0 0 0 15px;font-size:14px}[_ngcontent-%COMP%]:root{--blue: #0f172a;--black: #282828;--red: Red;--gray: #e2e4e6;--gray-dark: #979797;--gray-light: #585858;--light-gray: #d3d3d3;--orange: #ff8f00;--white: #ffffff;--light-black: #282828;--sidebar-black: #1c1c1c;--sidebar-hover-black: #282828;--light-gray-back: #f7f7f7;--dark-gray-back: #ecebeb;--graph-label: #2496ff;--graph-fill: #e0a7a7;--light-background: #f9f9f9;--blue-light: #f4f6f8;--pink: #f7b8ae}.content-container[_ngcontent-%COMP%]{font-size:16px;padding:5px 15px}.content-container[_ngcontent-%COMP%]   .main-container-heading[_ngcontent-%COMP%]{font-size:22px;color:#474747;font-family:Inter;margin-bottom:0}.content-container[_ngcontent-%COMP%]   .main-container-sub-heading[_ngcontent-%COMP%]{font-size:16px;color:#474747;font-family:Inter;padding-bottom:20px;margin-bottom:0}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{background-color:#fff;border-bottom:2px solid #ebedf0;padding:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.d-flex[_ngcontent-%COMP%]{flex-direction:column}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.section-desc[_ngcontent-%COMP%]{font-size:15px;color:gray;margin:0;padding:0;text-align:justify}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.detail-container[_ngcontent-%COMP%]{background-color:#f5f6f7;padding:25px 25px 50px;position:relative}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;padding:0 0 15px;margin:0}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{position:relative;padding:0;margin:0}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   span.currency[_ngcontent-%COMP%]{z-index:10;position:absolute;top:6px;left:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   input.input-text[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #bdc7d8;background-color:#fff;padding:5px 15px;margin:0;font-size:16px;color:#666;width:100%}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   input.input-text[_ngcontent-%COMP%]:focus{outline:none}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   input.input-text[_ngcontent-%COMP%]:disabled{background-color:#ddd}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   textarea.input-textarea[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #bdc7d8;background-color:#fff;padding:5px 15px;margin:0;font-size:16px;color:#666;width:100%}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   textarea.input-textarea[_ngcontent-%COMP%]:focus{outline:none}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   label.item-heading[_ngcontent-%COMP%]{font-size:16px;color:#666;padding:0;margin:0}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   label.item-text[_ngcontent-%COMP%]{background-color:#fff;margin:0;font-size:14px;color:#666;width:100%}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l1[_ngcontent-%COMP%]{font-size:16px;color:#474747;font-family:Inter;margin-bottom:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.sub-heading-l1[_ngcontent-%COMP%]{font-size:14px;color:#474747;font-family:Inter;margin-bottom:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l2[_ngcontent-%COMP%]{font-size:12px;font-family:Inter;color:#9b9b9b;display:block;margin-bottom:0;text-transform:capitalize}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l2[_ngcontent-%COMP%]   .bold[_ngcontent-%COMP%]{color:#9b9b9b}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l3[_ngcontent-%COMP%]{font-size:13px;font-family:Inter;color:#9b9b9b;display:block;margin-bottom:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.field-data[_ngcontent-%COMP%]{margin-bottom:20px;font-family:Inter;font-size:12px;color:#333;word-break:break-word;text-align:left;background-color:#fff}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   input.field-input[_ngcontent-%COMP%]{background:0 0;border:none;outline:0;border:1px solid #ddd;width:100%;border-radius:4px;font-size:16px;padding:9px;line-height:normal;color:#474747;font-family:Inter;letter-spacing:.9px;position:relative;background-color:#fff;font-size:14px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{font-size:16px}@media screen and (min-width: 768px){.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.d-flex[_ngcontent-%COMP%]{flex-direction:row}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l1[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.sub-heading-l1[_ngcontent-%COMP%]{font-size:15px;margin-bottom:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l2[_ngcontent-%COMP%]{font-size:14px;margin-bottom:5px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l3[_ngcontent-%COMP%]{margin-bottom:0}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.field-data[_ngcontent-%COMP%]{font-size:16px;margin-bottom:30px}div.detail-container[_ngcontent-%COMP%]{padding:25px 50px 45px!important}}.field-data[_ngcontent-%COMP%]{background-color:transparent!important}.transparent-backdrop[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;background:transparent;cursor:not-allowed}.content-border[_ngcontent-%COMP%]{padding-bottom:10px;border-bottom:2px solid #DBDBDB!important}.no-border[_ngcontent-%COMP%]{border:none!important}.subheadingLabel[_ngcontent-%COMP%]{color:#474747!important;font-weight:600!important}.tab-new-ui[_ngcontent-%COMP%]{list-style-type:none;padding:0;display:-webkit-box;align-items:center;object-fit:contain;position:relative;border-radius:4px;border:solid 1px #ebebeb;background-color:#fbfbfb;text-align:center;margin-bottom:0;overflow-x:auto}.tab-new-ui[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{height:auto;line-height:1.6;width:auto;word-break:break-word;justify-content:center;display:flex;align-items:center;padding:10px 20px!important;font-family:Inter;font-size:16px;color:#474747;cursor:pointer}@media screen and (max-width: 1330px) and (min-width: 1200px){.tab-new-ui[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{padding:0 24px;font-size:14px}}@media screen and (max-width: 1200px) and (min-width: 1050px){.tab-new-ui[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{padding:0 10px;font-size:14px}}@media screen and (max-width: 1050px) and (min-width: 992px){.tab-new-ui[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{padding:0 10px;font-size:12px;width:70px;word-break:break-word;padding:10px 0!important}}.tab-new-ui[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]:not(:last-child){border-right:solid 1px #ebebeb}.tab-new-ui[_ngcontent-%COMP%]   .tabs.selected[_ngcontent-%COMP%]{background:#fff;border-bottom:solid 2px var(--blue)}.action-strip[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.action-strip[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 10px}.action-strip[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{margin-left:0}.action-strip[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{margin-right:0}@media screen and (max-width: 768px){.action-strip[_ngcontent-%COMP%]{justify-content:center}.content-container[_ngcontent-%COMP%], .mobile-resp[_ngcontent-%COMP%]{padding-top:15px!important}}.icon-btn[_ngcontent-%COMP%]{font-size:16px}.geofence[_ngcontent-%COMP%]{height:calc(100vh - 150px)}@media screen and (max-width: 768px){.geofence[_ngcontent-%COMP%]{height:auto}.geofence[_ngcontent-%COMP%]   .map-option[_ngcontent-%COMP%]{width:225px!important}}@media screen and (max-width: 768px){.geofence[_ngcontent-%COMP%]   .map-holder[_ngcontent-%COMP%]{margin-top:15px;z-index:0}}.geofence[_ngcontent-%COMP%]   #geofence-list[_ngcontent-%COMP%], .geofence[_ngcontent-%COMP%]   #geofence-map[_ngcontent-%COMP%]{height:100%;border:inset 1px var(--black);background-color:var(--black)}@media screen and (max-width: 768px){.geofence[_ngcontent-%COMP%]   #geofence-list[_ngcontent-%COMP%], .geofence[_ngcontent-%COMP%]   #geofence-map[_ngcontent-%COMP%]{height:300px}}.geofence[_ngcontent-%COMP%]   .geofence-head[_ngcontent-%COMP%]{flex:0 auto}.geofence[_ngcontent-%COMP%]   .geofence-body[_ngcontent-%COMP%]{flex:1 auto}.map-card[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{height:100%;width:100%}.map-option[_ngcontent-%COMP%]{right:70px;left:inherit;top:0;padding:8px 0 0;letter-spacing:1px;position:absolute;background-color:#000000c7;width:350px;height:180px;z-index:1000;color:var(--white);border-radius:3px}.map-option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{line-height:3.56}.map-option[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   span.search[_ngcontent-%COMP%]{position:absolute;left:20px;opacity:.6;color:var(--white)}.map-option[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:30px;color:var(--white);border:none}.map-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);border-radius:5px;font-weight:100;width:100%}.map-option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:31%;float:left;text-align:center;margin-left:3px;cursor:pointer;padding:2px}.map-option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block;color:#ffffff7d;border-radius:5px;background-color:#ffffff1f;height:50px;line-height:2.56;margin-bottom:10px}.map-option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{border:1px solid var(--blue)}.map-option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--white)}.map-option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 4px;color:#ffffff7d;font-size:12px}.geofence-cards-main[_ngcontent-%COMP%]{height:calc(100% - 50px);margin:0;padding:100px 25px 0 0}.geofence-cards[_ngcontent-%COMP%], .all-geofence-map[_ngcontent-%COMP%]{height:100%}.geofence-cards[_ngcontent-%COMP%]{background:var(--white);border-radius:5px;box-shadow:0 0 10px #0000000d;border:solid 1px rgba(0,0,0,.1);position:relative;overflow-y:scroll}.geofence-cards-main.no-region[_ngcontent-%COMP%]{padding-top:0}.geofence-cards-main.no-region[_ngcontent-%COMP%]   .geofence-description[_ngcontent-%COMP%]{position:relative!important;padding-bottom:20px!important}.geofence-card-content[_ngcontent-%COMP%]{height:100%;overflow-y:auto}.geofence-single-card[_ngcontent-%COMP%]{margin:0;padding:15px;border-bottom:1px solid rgba(0,0,0,.1);cursor:pointer}.geofence-single-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #00000026}#geofence-single-card0[_ngcontent-%COMP%]{margin-top:0}.geofence-single-card[_ngcontent-%COMP%]:hover   .card-name[_ngcontent-%COMP%], .geofence-single-card[_ngcontent-%COMP%]:hover   .card-description[_ngcontent-%COMP%], .geofence-single-card[_ngcontent-%COMP%]:hover   .card-last-updated[_ngcontent-%COMP%]{color:#000}.card-name[_ngcontent-%COMP%]{font-size:16px;letter-spacing:1.2px;color:#31353c;font-family:Inter;display:flex;justify-content:space-between}.card-description[_ngcontent-%COMP%], .card-last-updated[_ngcontent-%COMP%]{font-family:Inter;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:13px;color:#31353c}.card-description[_ngcontent-%COMP%]{font-size:14px}[_nghost-%COMP%]     .input-box{font-family:Inter;display:block;height:35px;padding:5px;font-size:14px;line-height:1.52857143;box-shadow:none;color:var(--white);transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;width:100%!important;padding-left:34px!important;background:rgba(255,255,255,.1);border-radius:5px;border:0}@media screen and (max-width: 768px){.mg-bt[_ngcontent-%COMP%]{margin-bottom:10px}}.content-border-single[_ngcontent-%COMP%]{padding-left:8px!important;background-color:#fff}.heading-h4[_ngcontent-%COMP%]{padding-top:0;margin-bottom:10px!important}@media screen and (max-width: 768px){.content-container[_ngcontent-%COMP%]{margin-top:-10px!important}}']})}return a})();var A=g(33259);const ee=()=>["/dashboard/settings"],ne=()=>["/dashboard/branding/delivery-root"];function te(a,d){if(1&a&&(e.TgZ(0,"div",24)(1,"span",25),e._uU(2),e.qZA(),e.TgZ(3,"span",26),e._uU(4,">"),e.qZA(),e._uU(5,"\n  "),e.TgZ(6,"span",25),e._uU(7),e.qZA(),e._uU(8,"\n  "),e.TgZ(9,"span",26),e._uU(10,">"),e.qZA(),e._uU(11),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.Q6J("routerLink",e.DdM(5,ee)),e.xp6(1),e.Oqu(n.languageStrings.settings||"Settings"),e.xp6(4),e.Q6J("routerLink",e.DdM(6,ne)),e.xp6(1),e.Oqu(n.commonService.loginData.terminology.DELIVERY||"Delivery"),e.xp6(4),e.hij("",n.commonService.loginData.terminology.Geofence||"Geofence","\n")}}function oe(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"i",27),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.goBack())}),e.qZA()}}function ie(a,d){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const n=e.oxw();e.xp6(1),e.Oqu(n.languageStrings.A_geofence_is_a_virtual_perimeter_for_a_real_world_geographic_area||"A geofence is a virtual perimeter for a real-world geographic area.")}}function ae(a,d){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const n=e.oxw();e.xp6(1),e.Oqu(n.languageStrings.it_will_be_used_to_define_serving_area_of_your_store||"it will be used to define serving area of your store.")}}function re(a,d){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const n=e.oxw();e.xp6(1),e.Oqu(n.languageStrings.A_geofence_is_a_virtual_perimeter_for_a_real_world_geographic_area_Different_geofences_can_be_assigned_to_a_single_city||"A geofence is a virtual perimeter for a real-world geographic area. Different geofences can be assigned to a single city.")}}const z=a=>[a],ce=a=>({delivery:a}),P=a=>({direction:a});function se(a,d){if(1&a&&(e.TgZ(0,"button",28),e._uU(1),e.qZA()),2&a){const n=e.oxw();e.Q6J("routerLink",e.VKq(4,z,"/dashboard/geofence/picker/"+n.merchantId))("queryParams",e.VKq(6,ce,n.commonService.deliveryServingType))("ngStyle",e.VKq(8,P,n.direction)),e.xp6(1),e.hij("\n          ",n.languageStrings.Add_Geofence||"Add Geofence","\n        ")}}function ge(a,d){if(1&a&&(e.TgZ(0,"button",29),e._uU(1),e.qZA()),2&a){const n=e.oxw();e.Q6J("routerLink",e.VKq(3,z,"/dashboard/geofence/picker/"+n.merchantId+"/city"))("ngStyle",e.VKq(5,P,n.direction)),e.xp6(1),e.hij("\n        ",n.languageStrings.Add_Geofence||"Add Geofence","\n      ")}}function le(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.syncGeofenceFromTookan())}),e._uU(1),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("ngStyle",e.VKq(2,P,n.direction)),e.xp6(1),e.hij("\n        ",n.languageStrings.Sync_Geofence_from_TOOKAN_TOOKAN||"Sync geofence from tookan","\n      ")}}function de(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"li"),e._uU(1,"\n                        "),e.TgZ(2,"a",40),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,i=e.oxw(2);return e.KtG(i.onEdit(t.region_id))}),e._uU(3,"\n                          "),e._UZ(4,"i",45),e._uU(5,"\n                          "),e.ynx(6),e._uU(7),e.BQk(),e._uU(8,"\n                        "),e.qZA(),e._uU(9,"\n                      "),e.qZA()}if(2&a){const n=e.oxw(3);e.xp6(2),e.Q6J("ngStyle",e.VKq(2,P,n.direction)),e.xp6(5),e.Oqu(n.languageStrings.Edit||"Edit")}}function pe(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"div",35),e.NdJ("mouseover",function(){const i=e.CHM(n).index,r=e.oxw(2);return e.KtG(r.heighlightMap(i))})("mouseout",function(){const i=e.CHM(n).index,r=e.oxw(2);return e.KtG(r.dimGeofence(i))})("click",function(){const t=e.CHM(n),i=t.index,r=t.$implicit,c=e.oxw(2);return e.KtG(c.zoomBounds(i,r))}),e._uU(1,"\n                "),e.TgZ(2,"div",36),e._uU(3),e.TgZ(4,"div",37),e._uU(5,"\n                    "),e._UZ(6,"i",38),e._uU(7,"\n                    "),e.TgZ(8,"ul",39),e._uU(9,"\n                      "),e.YNc(10,de,10,4,"li",14),e._uU(11,"\n                      "),e.TgZ(12,"li"),e._uU(13,"\n                        "),e.TgZ(14,"a",40),e.NdJ("click",function(){const i=e.CHM(n).index,r=e.oxw(2);return e.KtG(r.deleteGeofence(i))}),e._uU(15,"\n                          "),e._UZ(16,"i",41),e._uU(17,"\n                          "),e.ynx(18),e._uU(19),e.BQk(),e._uU(20,"\n                        "),e.qZA(),e._uU(21,"\n                      "),e.qZA(),e._uU(22,"\n                    "),e.qZA(),e._uU(23,"\n                  "),e.qZA(),e._uU(24,"\n\n                "),e.qZA(),e._uU(25,"\n                "),e.TgZ(26,"div",42),e._uU(27),e.qZA(),e._uU(28,"\n                "),e.TgZ(29,"div",43),e._uU(30,"\n                  "),e.TgZ(31,"span"),e._uU(32),e.qZA(),e._uU(33,":\n                  "),e.TgZ(34,"span",44),e._uU(35),e.qZA(),e._uU(36,"\n                "),e.qZA(),e._uU(37,"\n              "),e.qZA()}if(2&a){const n=d.$implicit,o=d.index,t=e.oxw(2);e.s9C("id","geofence-single-card"+o),e.xp6(3),e.hij("\n                  ",n.region_name,"\n                  "),e.xp6(7),e.Q6J("ngIf",1===n.region_type&&t.commonService.loginData.is_product_line_type!=t.merchantSignupType.SINGLE_ADMIN_MULTIPLE_SINGLE_STORE),e.xp6(4),e.Q6J("ngStyle",e.VKq(10,P,t.direction)),e.xp6(5),e.Oqu(t.languageStrings.Delete||"Delete"),e.xp6(7),e.Q6J("pTooltip",n.region_description)("tooltipZIndex",6),e.xp6(1),e.hij("\n                  ",n.region_description||"-","\n                "),e.xp6(5),e.Oqu(t.languageStrings.Last_Updated||"Last Updated"),e.xp6(3),e.Oqu(n.last_updated_at.split("T")[0])}}function fe(a,d){if(1&a&&(e.TgZ(0,"div",46),e._uU(1),e.qZA()),2&a){const n=e.oxw(2);e.xp6(1),e.hij("\n                ",n.languageStrings.No_Geofence_found||"No Geofence found.","\n              ")}}function me(a,d){if(1&a&&(e.TgZ(0,"div",31),e._uU(1,"\n            "),e.TgZ(2,"div",32),e._uU(3,"\n              "),e.YNc(4,pe,38,12,"div",33),e._uU(5,"\n              "),e.YNc(6,fe,2,1,"div",34),e._uU(7,"\n            "),e.qZA(),e._uU(8,"\n          "),e.qZA()),2&a){const n=e.oxw();e.xp6(4),e.Q6J("ngForOf",n.geofenceService.geofenceList),e.xp6(2),e.Q6J("ngIf",!n.geofenceService.geofenceList.length)}}const F=a=>({"content-border-single":a});let q=(()=>{class a{constructor(n,o,t,i,r,c){this.geofenceService=n,this.route=o,this.router=t,this.confirmationService=i,this.commonService=r,this.customMessage=c,this.layout_type=1,this.mainPolygons=[],this.bounds=new google.maps.LatLngBounds,this.previouslyViewed=-1,this.mainFlightmapPolygons=[],this.existingLayers=[],this.merchantSignupType=S.IE,this.languageStrings={},this.defaultMapprKey="5e095000-d05c-11ec-a225-55c1449998e5"}ngOnInit(){this.direction="ar"===this.commonService.loginData.language||"he"===this.commonService.loginData.language?"rtl":"ltr",this.commonService.langStringsPromise.then(()=>{this.languageStrings=this.commonService.accountTranslationsList,this.setLangKeys()}),this.is_flight_map=0===this.commonService.loginData.map_object.map_type&&1525398!=this.commonService.loginData.marketplace_user_id,this.is_flight_map?this.initializeFlightmap():this.initMap(),this.fetchMerchantId(),this.route.queryParams.subscribe(n=>{n.data&&(this.commonService.deliveryServingType=n.data,console.log(this.commonService.deliveryServingType))})}setLangKeys(){this.languageStrings.Sync_Geofence_from_TOOKAN_TOOKAN=(this.languageStrings.Sync_Geofence_from_TOOKAN_TOOKAN||"Sync Geofence from TOOKAN_TOOKAN").replace("TOOKAN_TOOKAN",this.commonService.loginData.terminology.TOOKAN)}onEdit(n){this.router.navigate(["/dashboard/geofence/picker/"+this.merchantId],{queryParams:{region_id:n,delivery:this.commonService.deliveryServingType}})}heighlightMap(n){this.is_flight_map?this.mainFlightmapPolygons[n].setStyle({fillOpacity:.7}):this.mainPolygons[n].setOptions({fillOpacity:.7})}dimGeofence(n){this.is_flight_map?this.mainFlightmapPolygons[n].setStyle({fillOpacity:.4}):this.mainPolygons[n].setOptions({fillOpacity:.4})}zoomBounds(n,o){if(this.is_flight_map){let i=[];for(let r=0;r<o.region_data.length;r++)i.push([o.region_data[r].x,o.region_data[r].y]);var t=new L.LatLngBounds([i]);-1!==this.previouslyViewed&&this.mainFlightmapPolygons[this.previouslyViewed]&&this.mainFlightmapPolygons[this.previouslyViewed].setStyle({color:"#00f"}),this.mainFlightmapPolygons[n].setStyle({color:"#ff0"}),this.previouslyViewed=n,setTimeout(()=>{this.flightmap.fitBounds(t,{padding:[80,80]})},100)}else{const i=new google.maps.LatLngBounds;for(let r=0;r<o.region_data.length;r++){const c=new google.maps.LatLng(o.region_data[r].x,o.region_data[r].y);i.extend(c)}-1!==this.previouslyViewed&&this.mainPolygons[this.previouslyViewed]&&(this.mainPolygons[this.previouslyViewed].setOptions({strokeColor:"#00f"}),this.mainPolygons[this.previouslyViewed].setOptions({fillColor:"#00f"})),this.mainPolygons[n].setOptions({fillColor:"#ff0"}),this.mainPolygons[n].setOptions({strokeColor:"#ff0"}),this.previouslyViewed=n,setTimeout(()=>{this.map.fitBounds(i)},100)}}deleteGeofence(n){this.confirmationService.confirm({header:this.commonService.accountTranslationsList.Confirm||"Confirm",message:this.commonService.accountTranslationsList.are_you_sure_want_to_delete_this_geofence||"Are you sure want to delete this Geofence?",confirmBtnText:this.commonService.accountTranslationsList.Delete||"Delete",accept:()=>{this.onDeleteGeofence(n)}})}onDeleteGeofence(n){this.commonService.showLoader=!0,this.geofenceService.deleteGeofence(this.geofenceService.geofenceList[n].region_id,this.merchantId).subscribe(o=>{this.commonService.showLoader=!1,this.customMessage.showMessage({severity:"success",detail:o.message}),this.is_flight_map?(this.flightmap.removeLayer(this.existingLayers[n]),this.mainFlightmapPolygons.splice(n,1)):(this.mainPolygons[n].setMap(null),this.mainPolygons.splice(n,1)),this.geofenceService.geofenceList.splice(n,1)},o=>{this.commonService.showLoader=!1,this.commonService.handleError(o)})}fetchMerchantId(){this.route.params.subscribe(n=>{console.log(n),this.merchantId=n.merchant_id,this.geofenceService.layout_type=n.city?2:1})}initMap(){this.geofenceService.geofenceList.length&&(this.is_flight_map||(this.map=new google.maps.Map(document.getElementById("geofence-list"),U)),this.setPreviewData())}initializeFlightmap(){var n=this;return(0,M.Z)(function*(){yield n.commonService.loadFlightmapGeofenceScripts();const o={};o.fm_token=n.commonService.loginData.map_object.dashboard_map_api_key||n.defaultMapprKey,o.style_name="default.json";var t=new JungleMaps("JungleMap",o);n.flightmap=new L.map("geofence-list",{attributionControl:!0,zoomControl:!1,center:new L.LatLng(30.741482,76.768066),zoom:0,fullscreenControl:!0,fullscreenControlOptions:{position:"topleft"}});let i=yield t.getLayer();n.flightmap.addLayer(i),n.flightmap.addControl(L.control.zoom({position:"topright"})),n.flightmap.on("load",()=>{n.flightmap.addControl(L.control.Fullscreen({position:"topleft"}))}),n.setPreviewData()})()}setPreviewData(){this.geofenceService.geofenceList.length>0&&this.geofenceService.geofenceList.forEach(this.is_flight_map?n=>{this.constructPolygonsFlightmap(n)}:n=>{this.constructPolygons(n)})}constructPolygons(n){if(n.region_data){const o=this.generateCoordinates(n.region_data),t=new google.maps.Polygon({paths:o,strokeColor:"#3468fa",strokeOpacity:.8,strokeWeight:2,fillColor:"#3468fa",fillOpacity:.4,draggable:!1});this.mainPolygons.push(t),t.setMap(this.map)}this.map.fitBounds(this.bounds)}constructPolygonsFlightmap(n){var o=this;return(0,M.Z)(function*(){o.mainPolygons=[];var t=o.generateCoordinatesFlightmap(n.region_data),i=L.polygon(t,{color:"blue"});o.drawnItems=new L.FeatureGroup,o.flightmap.addLayer(o.drawnItems),o.existingLayers.push(o.drawnItems),o.bounds=L.latLngBounds(o.bounds.getSouthWest(),o.bounds.getNorthEast()),o.flightmap.fitBounds(o.bounds,{padding:[50,50]}),o.flightmap.on("load",()=>{o.flightmap.setZoom(2)}),o.drawnItems.addLayer(i),o.flightmap.addLayer(o.drawnItems),o.mainFlightmapPolygons.push(i)})()}generateCoordinatesFlightmap(n){this.bounds=new L.LatLngBounds;let o=[];return n.forEach(t=>{const i=new L.LatLng(+t.x,+t.y);this.flightmap.panTo(i),this.bounds.extend(i),o.push(i)}),o}generateCoordinates(n){const o=[];return n.forEach(t=>{const r=new google.maps.LatLng(+t.x,+t.y);this.bounds.extend(r),o.push(r)}),o}goBack(){this.router.navigate(this.commonService.loginData.user_type===S.FW.ADMIN?["/dashboard/merchants/merchant-details",this.merchantId]:["/dashboard/settings"])}syncGeofenceFromTookan(){this.commonService.showLoader=!0,this.geofenceService.getGeofenceFromTookan().subscribe(n=>{this.commonService.showLoader=!1,200==n.status&&this.getGeofenceList(),this.customMessage.showMessage({severity:"success",detail:n.message})},n=>{this.commonService.showLoader=!1,this.commonService.handleError(n)})}getGeofenceList(){this.commonService.showLoader=!0,this.geofenceService.getGeofence(this.merchantId).subscribe(n=>{this.commonService.showLoader=!1,this.geofenceService.geofenceList=n.data,this.is_flight_map?this.initializeFlightmap():this.initMap()},()=>{this.commonService.showLoader=!1,this.geofenceService.geofenceList=[]})}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(w),e.Y36(u.gz),e.Y36(u.F0),e.Y36(Z.Y),e.Y36(v.v),e.Y36(G.S))};static#n=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-geofence-list"]],decls:77,vars:23,consts:[["class","route","style","font-size: 12px;font-weight: bold;margin-bottom: 10px;",4,"ngIf"],[1,"content-container","p-0"],[1,"d-flex","align-items-center","content-border","header-div",3,"ngClass"],["width","48","height","48","viewBox","0 0 48 48","fill","none","xmlns","http://www.w3.org/2000/svg"],[2,"mix-blend-mode","darken"],["d","M48 24C48 10.7452 37.2548 0 24 0C10.7452 0 0 10.7452 0 24C0 37.2548 10.7452 48 24 48C37.2548 48 48 37.2548 48 24Z","fill","#E3E7EA"],["clip-path","url(#clip0_18_16)"],["d","M18 28V32H22V28M22 24V18L20 16L18 18V24M26 28V32H30V28M30 24V18L28 16L26 18V24M16 24V28H32V24H16Z","stroke","#111827","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round",1,"header-icon-color"],["id","clip0_18_16"],["width","24","height","24","fill","white","transform","translate(12 12)"],[1,"main-container-heading","heading-h4",3,"ngStyle"],["class","yf yf-arrow-back icon-btn",3,"click",4,"ngIf"],[1,"content-border",3,"ngClass"],[1,"section-desc","d-flex","flex-wrap","justify-content-between","mb-3",3,"ngStyle"],[4,"ngIf"],["class","btn btn-yl-primary mg-bt",3,"routerLink","queryParams","ngStyle",4,"ngIf"],["class","btn btn-yl-primary mg-bt",3,"routerLink","ngStyle",4,"ngIf"],["class","btn btn-yl-primary",3,"ngStyle","click",4,"ngIf"],[1,"geofence","d-flex","flex-column"],[1,"row","geofence-body"],[1,"col-12","col-md-4",2,"max-height","100%"],["class","geofence-cards","style","overflow: hidden;",4,"ngIf"],[1,"col-12","col-md-8","map-holder"],["id","geofence-list",3,"hidden"],[1,"route",2,"font-size","12px","font-weight","bold","margin-bottom","10px"],[2,"color","#377dff","cursor","pointer",3,"routerLink"],[2,"padding","0 3px"],[1,"yf","yf-arrow-back","icon-btn",3,"click"],[1,"btn","btn-yl-primary","mg-bt",3,"routerLink","queryParams","ngStyle"],[1,"btn","btn-yl-primary","mg-bt",3,"routerLink","ngStyle"],[1,"btn","btn-yl-primary",3,"ngStyle","click"],[1,"geofence-cards",2,"overflow","hidden"],[1,"geofence-card-content"],["class","geofence-single-card",3,"id","mouseover","mouseout","click",4,"ngFor","ngForOf"],["class","proxima-bold no-geofence",4,"ngIf"],[1,"geofence-single-card",3,"id","mouseover","mouseout","click"],[1,"card-name","pos-rel"],[1,"menu-box",2,"position","relative"],[1,"tf","more-menu"],[1,"menu-list"],[1,"btn","btn-default",3,"ngStyle","click"],[1,"fa","fa-trash","icons"],["tooltipPosition","bottom",1,"card-description",3,"pTooltip","tooltipZIndex"],[1,"card-last-updated"],[1,"proxima-semi-bold"],[1,"fa","fa-pencil","icons"],[1,"proxima-bold","no-geofence"]],template:function(o,t){1&o&&(e.YNc(0,te,12,7,"div",0),e._uU(1,"\n"),e.TgZ(2,"div",1),e._uU(3,"\n  "),e.TgZ(4,"div",2),e._uU(5,"\n    "),e.O4$(),e.TgZ(6,"svg",3),e._uU(7,"\n      "),e.TgZ(8,"g",4),e._uU(9,"\n      "),e._UZ(10,"path",5),e._uU(11,"\n      "),e.TgZ(12,"g",6),e._uU(13,"\n      "),e._UZ(14,"path",7),e._uU(15,"\n      "),e.qZA(),e._uU(16,"\n      "),e.qZA(),e._uU(17,"\n      "),e.TgZ(18,"defs"),e._uU(19,"\n      "),e.TgZ(20,"clipPath",8),e._uU(21,"\n      "),e._UZ(22,"rect",9),e._uU(23,"\n      "),e.qZA(),e._uU(24,"\n      "),e.qZA(),e._uU(25,"\n      "),e.qZA(),e._uU(26,"      \n      "),e.kcU(),e.TgZ(27,"label",10),e._uU(28,"\n        "),e.YNc(29,oe,1,0,"i",11),e._uU(30,"\n      "),e.ynx(31),e._uU(32),e.BQk(),e._uU(33,"\n    "),e.qZA(),e._uU(34,"\n  "),e.qZA(),e._uU(35,"\n  "),e.TgZ(36,"section",12),e._uU(37,"\n    "),e.TgZ(38,"div"),e._uU(39,"\n      "),e.TgZ(40,"div",13),e._uU(41,"\n        "),e.TgZ(42,"div"),e._uU(43,"\n          "),e.YNc(44,ie,2,1,"ng-container",14),e._uU(45,"\n          "),e.YNc(46,ae,2,1,"ng-container",14),e._uU(47,"\n          "),e.YNc(48,re,2,1,"ng-container",14),e._uU(49,"\n        "),e.qZA(),e._uU(50,"\n        "),e.YNc(51,se,2,10,"button",15),e._uU(52,"\n        "),e.YNc(53,ge,2,7,"button",16),e._uU(54,"\n        "),e.YNc(55,le,2,4,"button",17),e._uU(56,"\n      "),e.qZA(),e._uU(57,"\n\n    "),e.qZA(),e._uU(58,"\n    "),e.TgZ(59,"div",18),e._uU(60,"\n      "),e.TgZ(61,"div",19),e._uU(62,"\n        "),e.TgZ(63,"div",20),e._uU(64,"\n          "),e._uU(65,"\n          "),e.YNc(66,me,9,2,"div",21),e._uU(67,"\n        "),e.qZA(),e._uU(68,"\n        "),e.TgZ(69,"div",22),e._uU(70,"\n          "),e._UZ(71,"div",23),e._uU(72,"\n        "),e.qZA(),e._uU(73,"\n      "),e.qZA(),e._uU(74,"\n    "),e.qZA(),e._uU(75,"\n  "),e.qZA(),e._uU(76,"\n"),e.qZA()),2&o&&(e.Q6J("ngIf",t.commonService.loginData.is_product_line_type===t.merchantSignupType.SINGLE_ADMIN_SINGLE_STORE),e.xp6(4),e.Q6J("ngClass",e.VKq(15,F,t.commonService.loginData.is_product_line_type===t.merchantSignupType.SINGLE_ADMIN_SINGLE_STORE)),e.xp6(23),e.Q6J("ngStyle",e.VKq(17,P,t.direction)),e.xp6(2),e.Q6J("ngIf",1==t.geofenceService.layout_type),e.xp6(3),e.Oqu(t.languageStrings.geofence||"Geofence"),e.xp6(4),e.Q6J("ngClass",e.VKq(19,F,t.commonService.loginData.is_product_line_type===t.merchantSignupType.SINGLE_ADMIN_SINGLE_STORE)),e.xp6(4),e.Q6J("ngStyle",e.VKq(21,P,t.direction)),e.xp6(4),e.Q6J("ngIf",1==t.geofenceService.layout_type),e.xp6(2),e.Q6J("ngIf",1==t.geofenceService.layout_type),e.xp6(2),e.Q6J("ngIf",2==t.geofenceService.layout_type),e.xp6(3),e.Q6J("ngIf",1==t.geofenceService.layout_type),e.xp6(2),e.Q6J("ngIf",2==t.geofenceService.layout_type),e.xp6(2),e.Q6J("ngIf",2===t.commonService.loginData.user_type&&2==t.geofenceService.layout_type),e.xp6(11),e.Q6J("ngIf",t.geofenceService.geofenceList.length>0),e.xp6(5),e.Q6J("hidden",!t.geofenceService.geofenceList.length))},dependencies:[C.mk,C.sg,C.O5,C.PC,u.rH,A.u],styles:['.menu-box[_ngcontent-%COMP%]{display:inline-block;position:relative;cursor:pointer}.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{justify-content:center;position:absolute;border:1px solid var(--gray);z-index:5;background:var(--white);width:115px;padding-left:0;padding-top:5px;padding-bottom:5px;list-style:none;box-shadow:0 6px 12px var(--gray);display:none;text-align:center;min-width:110px;left:auto;top:100%;margin:2px 0 0;font-size:14px;background-clip:padding-box;border-radius:4px}.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;color:var(--black)}.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--black);display:block;width:100%;text-align:left;padding:10px;height:35px;border-left:3px solid transparent;line-height:1;clear:both;font-weight:400;white-space:normal;font-size:14px}.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:right}.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i.yf[_ngcontent-%COMP%]{font-size:px}.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--blue);border-left:3px solid var(--blue)}.menu-box[_ngcontent-%COMP%]:hover   .menu-list[_ngcontent-%COMP%]{display:block}.menu-list[_ngcontent-%COMP%]:before{content:" ";border:9px solid transparent;position:absolute;bottom:100%;border-bottom:7px solid var(--gray);right:2px}.menu-list[_ngcontent-%COMP%]:after{content:" ";border:9px solid transparent;position:absolute;bottom:100%;border-bottom:7px solid transparent;right:0;width:100%}.menu-list[_ngcontent-%COMP%]::hover{border-left:3px solid var(--blue)}@media (min-width: 768px){.menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{right:0}}@media screen and (max-width: 640px){.menu-list[_ngcontent-%COMP%]:before{left:2px;right:inherit}}@media (max-width: 768px){.customers[_ngcontent-%COMP%]   tr.body-row[_ngcontent-%COMP%]   .menu-box[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]{margin-left:-3px;top:-190px}.customers[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]:before{content:" ";border:9px solid transparent;position:absolute;bottom:0;right:100%;border-top:7px solid var(--gray);right:px;right:90px;bottom:-18px}.customers[_ngcontent-%COMP%]   .menu-list[_ngcontent-%COMP%]:after{content:" ";border:9px solid transparent;position:absolute;bottom:0;border-top:7px solid transparent;right:100%;width:100%}}.check-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:9}.check-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{border-radius:110px;border:solid 1.1px rgba(151,151,151,.53);width:17px;height:17px;display:inline-block;position:relative;text-align:center;vertical-align:middle;margin-top:-3px;transition:all .25s ease;color:#fff}.check-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background-color:var(--blue);border:solid 1.1px transparent;color:#fff}.check-radio[_ngcontent-%COMP%]   span.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:2;width:100%;height:100%;background:rgba(255,255,255,.67)}.check-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%] + span.overlay[_ngcontent-%COMP%]{box-shadow:0 5px 15px 4px #00000026;background:transparent}.check-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]:after{content:"\\e92a";position:absolute;top:0;left:0;right:0;opacity:0;line-height:16px;font-size:8px}.check-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:after{animation:load8 .5s;opacity:1}.radio-ck-label[_ngcontent-%COMP%]{font-size:14px}.checkbox-box[_ngcontent-%COMP%]{position:relative;border:1px solid #ddd;padding:9px 20px;border-radius:4px;display:flex;justify-content:flex-start;align-items:center;-webkit-user-select:none;user-select:none;font-family:Inter;cursor:pointer}.checkbox-box[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.checkbox-box[_ngcontent-%COMP%]   .radio-ck-label[_ngcontent-%COMP%]{margin:0 0 0 15px;font-size:14px}[_ngcontent-%COMP%]:root{--blue: #0f172a;--black: #282828;--red: Red;--gray: #e2e4e6;--gray-dark: #979797;--gray-light: #585858;--light-gray: #d3d3d3;--orange: #ff8f00;--white: #ffffff;--light-black: #282828;--sidebar-black: #1c1c1c;--sidebar-hover-black: #282828;--light-gray-back: #f7f7f7;--dark-gray-back: #ecebeb;--graph-label: #2496ff;--graph-fill: #e0a7a7;--light-background: #f9f9f9;--blue-light: #f4f6f8;--pink: #f7b8ae}.content-container[_ngcontent-%COMP%]{font-size:16px;padding:5px 15px}.content-container[_ngcontent-%COMP%]   .main-container-heading[_ngcontent-%COMP%]{font-size:22px;color:#474747;font-family:Inter;margin-bottom:0}.content-container[_ngcontent-%COMP%]   .main-container-sub-heading[_ngcontent-%COMP%]{font-size:16px;color:#474747;font-family:Inter;padding-bottom:20px;margin-bottom:0}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{background-color:#fff;border-bottom:2px solid #ebedf0;padding:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.d-flex[_ngcontent-%COMP%]{flex-direction:column}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.section-desc[_ngcontent-%COMP%]{font-size:15px;color:gray;margin:0;padding:0;text-align:justify}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.detail-container[_ngcontent-%COMP%]{background-color:#f5f6f7;padding:25px 25px 50px;position:relative}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;padding:0 0 15px;margin:0}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{position:relative;padding:0;margin:0}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   span.currency[_ngcontent-%COMP%]{z-index:10;position:absolute;top:6px;left:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   input.input-text[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #bdc7d8;background-color:#fff;padding:5px 15px;margin:0;font-size:16px;color:#666;width:100%}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   input.input-text[_ngcontent-%COMP%]:focus{outline:none}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   input.input-text[_ngcontent-%COMP%]:disabled{background-color:#ddd}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   textarea.input-textarea[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #bdc7d8;background-color:#fff;padding:5px 15px;margin:0;font-size:16px;color:#666;width:100%}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   textarea.input-textarea[_ngcontent-%COMP%]:focus{outline:none}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   label.item-heading[_ngcontent-%COMP%]{font-size:16px;color:#666;padding:0;margin:0}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.input-row[_ngcontent-%COMP%]   label.item-text[_ngcontent-%COMP%]{background-color:#fff;margin:0;font-size:14px;color:#666;width:100%}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l1[_ngcontent-%COMP%]{font-size:16px;color:#474747;font-family:Inter;margin-bottom:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.sub-heading-l1[_ngcontent-%COMP%]{font-size:14px;color:#474747;font-family:Inter;margin-bottom:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l2[_ngcontent-%COMP%]{font-size:12px;font-family:Inter;color:#9b9b9b;display:block;margin-bottom:0;text-transform:capitalize}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l2[_ngcontent-%COMP%]   .bold[_ngcontent-%COMP%]{color:#9b9b9b}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l3[_ngcontent-%COMP%]{font-size:13px;font-family:Inter;color:#9b9b9b;display:block;margin-bottom:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.field-data[_ngcontent-%COMP%]{margin-bottom:20px;font-family:Inter;font-size:12px;color:#333;word-break:break-word;text-align:left;background-color:#fff}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   input.field-input[_ngcontent-%COMP%]{background:0 0;border:none;outline:0;border:1px solid #ddd;width:100%;border-radius:4px;font-size:16px;padding:9px;line-height:normal;color:#474747;font-family:Inter;letter-spacing:.9px;position:relative;background-color:#fff;font-size:14px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{font-size:16px}@media screen and (min-width: 768px){.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   div.d-flex[_ngcontent-%COMP%]{flex-direction:row}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l1[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.sub-heading-l1[_ngcontent-%COMP%]{font-size:15px;margin-bottom:10px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l2[_ngcontent-%COMP%]{font-size:14px;margin-bottom:5px}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.heading-l3[_ngcontent-%COMP%]{margin-bottom:0}.content-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   label.field-data[_ngcontent-%COMP%]{font-size:16px;margin-bottom:30px}div.detail-container[_ngcontent-%COMP%]{padding:25px 50px 45px!important}}.field-data[_ngcontent-%COMP%]{background-color:transparent!important}.transparent-backdrop[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;background:transparent;cursor:not-allowed}.content-border[_ngcontent-%COMP%]{padding-bottom:10px;border-bottom:2px solid #DBDBDB!important}.no-border[_ngcontent-%COMP%]{border:none!important}.subheadingLabel[_ngcontent-%COMP%]{color:#474747!important;font-weight:600!important}.tab-new-ui[_ngcontent-%COMP%]{list-style-type:none;padding:0;display:-webkit-box;align-items:center;object-fit:contain;position:relative;border-radius:4px;border:solid 1px #ebebeb;background-color:#fbfbfb;text-align:center;margin-bottom:0;overflow-x:auto}.tab-new-ui[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{height:auto;line-height:1.6;width:auto;word-break:break-word;justify-content:center;display:flex;align-items:center;padding:10px 20px!important;font-family:Inter;font-size:16px;color:#474747;cursor:pointer}@media screen and (max-width: 1330px) and (min-width: 1200px){.tab-new-ui[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{padding:0 24px;font-size:14px}}@media screen and (max-width: 1200px) and (min-width: 1050px){.tab-new-ui[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{padding:0 10px;font-size:14px}}@media screen and (max-width: 1050px) and (min-width: 992px){.tab-new-ui[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{padding:0 10px;font-size:12px;width:70px;word-break:break-word;padding:10px 0!important}}.tab-new-ui[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]:not(:last-child){border-right:solid 1px #ebebeb}.tab-new-ui[_ngcontent-%COMP%]   .tabs.selected[_ngcontent-%COMP%]{background:#fff;border-bottom:solid 2px var(--blue)}.action-strip[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.action-strip[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 10px}.action-strip[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{margin-left:0}.action-strip[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{margin-right:0}@media screen and (max-width: 768px){.action-strip[_ngcontent-%COMP%]{justify-content:center}.content-container[_ngcontent-%COMP%], .mobile-resp[_ngcontent-%COMP%]{padding-top:15px!important}}.icon-btn[_ngcontent-%COMP%]{font-size:16px}.geofence[_ngcontent-%COMP%]{height:calc(100vh - 150px)}@media screen and (max-width: 768px){.geofence[_ngcontent-%COMP%]{height:auto}.geofence[_ngcontent-%COMP%]   .map-option[_ngcontent-%COMP%]{width:225px!important}}@media screen and (max-width: 768px){.geofence[_ngcontent-%COMP%]   .map-holder[_ngcontent-%COMP%]{margin-top:15px;z-index:0}}.geofence[_ngcontent-%COMP%]   #geofence-list[_ngcontent-%COMP%], .geofence[_ngcontent-%COMP%]   #geofence-map[_ngcontent-%COMP%]{height:100%;border:inset 1px var(--black);background-color:var(--black)}@media screen and (max-width: 768px){.geofence[_ngcontent-%COMP%]   #geofence-list[_ngcontent-%COMP%], .geofence[_ngcontent-%COMP%]   #geofence-map[_ngcontent-%COMP%]{height:300px}}.geofence[_ngcontent-%COMP%]   .geofence-head[_ngcontent-%COMP%]{flex:0 auto}.geofence[_ngcontent-%COMP%]   .geofence-body[_ngcontent-%COMP%]{flex:1 auto}.map-card[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{height:100%;width:100%}.map-option[_ngcontent-%COMP%]{right:70px;left:inherit;top:0;padding:8px 0 0;letter-spacing:1px;position:absolute;background-color:#000000c7;width:350px;height:180px;z-index:1000;color:var(--white);border-radius:3px}.map-option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{line-height:3.56}.map-option[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   span.search[_ngcontent-%COMP%]{position:absolute;left:20px;opacity:.6;color:var(--white)}.map-option[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:30px;color:var(--white);border:none}.map-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);border-radius:5px;font-weight:100;width:100%}.map-option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:31%;float:left;text-align:center;margin-left:3px;cursor:pointer;padding:2px}.map-option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block;color:#ffffff7d;border-radius:5px;background-color:#ffffff1f;height:50px;line-height:2.56;margin-bottom:10px}.map-option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{border:1px solid var(--blue)}.map-option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--white)}.map-option[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 4px;color:#ffffff7d;font-size:12px}.geofence-cards-main[_ngcontent-%COMP%]{height:calc(100% - 50px);margin:0;padding:100px 25px 0 0}.geofence-cards[_ngcontent-%COMP%], .all-geofence-map[_ngcontent-%COMP%]{height:100%}.geofence-cards[_ngcontent-%COMP%]{background:var(--white);border-radius:5px;box-shadow:0 0 10px #0000000d;border:solid 1px rgba(0,0,0,.1);position:relative;overflow-y:scroll}.geofence-cards-main.no-region[_ngcontent-%COMP%]{padding-top:0}.geofence-cards-main.no-region[_ngcontent-%COMP%]   .geofence-description[_ngcontent-%COMP%]{position:relative!important;padding-bottom:20px!important}.geofence-card-content[_ngcontent-%COMP%]{height:100%;overflow-y:auto}.geofence-single-card[_ngcontent-%COMP%]{margin:0;padding:15px;border-bottom:1px solid rgba(0,0,0,.1);cursor:pointer}.geofence-single-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #00000026}#geofence-single-card0[_ngcontent-%COMP%]{margin-top:0}.geofence-single-card[_ngcontent-%COMP%]:hover   .card-name[_ngcontent-%COMP%], .geofence-single-card[_ngcontent-%COMP%]:hover   .card-description[_ngcontent-%COMP%], .geofence-single-card[_ngcontent-%COMP%]:hover   .card-last-updated[_ngcontent-%COMP%]{color:#000}.card-name[_ngcontent-%COMP%]{font-size:16px;letter-spacing:1.2px;color:#31353c;font-family:Inter;display:flex;justify-content:space-between}.card-description[_ngcontent-%COMP%], .card-last-updated[_ngcontent-%COMP%]{font-family:Inter;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:13px;color:#31353c}.card-description[_ngcontent-%COMP%]{font-size:14px}[_nghost-%COMP%]     .input-box{font-family:Inter;display:block;height:35px;padding:5px;font-size:14px;line-height:1.52857143;box-shadow:none;color:var(--white);transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;width:100%!important;padding-left:34px!important;background:rgba(255,255,255,.1);border-radius:5px;border:0}@media screen and (max-width: 768px){.mg-bt[_ngcontent-%COMP%]{margin-bottom:10px}}.content-border-single[_ngcontent-%COMP%]{padding-left:8px!important;background-color:#fff}.heading-h4[_ngcontent-%COMP%]{padding-top:0;margin-bottom:10px!important}@media screen and (max-width: 768px){.content-container[_ngcontent-%COMP%]{margin-top:-10px!important}}']})}return a})(),_e=(()=>{class a{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||a)};static#n=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-geofence"]],decls:2,vars:0,template:function(o,t){1&o&&(e._uU(0,"\n"),e._UZ(1,"router-outlet"))},dependencies:[u.lC]})}return a})();var he=g(46785),ue=g(39799);let x=(()=>{class a{constructor(n,o,t){this.commonService=n,this.geofenceService=o,this.router=t}canActivate(n,o){return this.geofenceService.layout_type=n.params.city?2:1,this.commonService.showLoader=!0,this.commonService.deliveryServingType=n.queryParams.delivery,this.geofenceService.getGeofence(+n.params.merchant_id).pipe((0,_.U)(t=>(this.commonService.showLoader=!1,200===t.status?(this.commonService.showLoader=!1,this.geofenceService.geofenceList=t.data,!0):(this.geofenceService.geofenceList=[],!0)),t=>{this.router.navigate(["dashboard"])}))}static#e=this.\u0275fac=function(o){return new(o||a)(e.LFG(v.v),e.LFG(w),e.LFG(u.F0))};static#n=this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac})}return a})();var ye=g(19902);const Ce=[{path:"",component:_e,children:[{path:"list/:merchant_id/:city",component:q,canActivate:[x]},{path:"list/:merchant_id",component:q,canActivate:[x]},{path:"picker/:merchant_id/:city",component:D,canActivate:[x]},{path:"picker/:merchant_id",component:D,canActivate:[x]}]}];let Me=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#n=this.\u0275mod=e.oAB({type:a});static#t=this.\u0275inj=e.cJS({providers:[w,x],imports:[C.ez,u.Bz.forChild(Ce),f.UX,f.u5,he.T,ue.Q,A.z,ye.a,I.kW]})}return a})()}}]);