"use strict";(self.webpackChunkyelo_dashboard_angular=self.webpackChunkyelo_dashboard_angular||[]).push([[1064],{1064:(M,h,r)=>{r.d(h,{z:()=>v});var t=r(85678),_=r(60095),p=r(83620),g=r(34243),a=r(96814);const u=()=>({standalone:!0});function m(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div",16),t._uU(1,"\n      "),t.TgZ(2,"input",19),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw(3);return t.KtG(i.showSelectedOnly=o)})("change",function(o){t.CHM(e);const i=t.oxw(3);return t.KtG(i.toggleSelectedProducts(o))}),t.qZA(),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("ngModel",e.showSelectedOnly)("ngModelOptions",t.DdM(3,u)),t.xp6(1),t.hij("\n      ",e.languageStrings.selected_products||"Show selected Products","\n    ")}}function f(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div",5),t._uU(1,"\n    "),t.TgZ(2,"div",16),t._uU(3,"\n      "),t.TgZ(4,"input",17),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw(2);return t.KtG(i.selectAllProductList=o)})("change",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.selectAll())}),t.qZA(),t._uU(5),t.qZA(),t._uU(6,"\n    "),t.YNc(7,m,4,4,"div",18),t._uU(8,"\n  "),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngModel",e.selectAllProductList)("ngModelOptions",t.DdM(5,u))("disabled",e.selectAllProductList),t.xp6(1),t.hij("\n      ",e.languageStrings.select_all||"Select All","\n    "),t.xp6(2),t.Q6J("ngIf",e.showSelected&&e.items_present)}}const P=(n,l)=>({"marginSix ":n,"marginBottom ":l});function x(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){const o=t.CHM(e),i=o.$implicit,c=o.index,d=t.oxw(2);return t.KtG(d.SelectUnselectProduct(i,c))}),t._uU(1,"\n          "),t._UZ(2,"input",21),t._uU(3,"\n          "),t.TgZ(4,"span",22),t._uU(5),t.qZA(),t._uU(6,"\n        "),t.qZA()}if(2&n){const e=l.$implicit,s=l.index,o=t.oxw(2);t.Q6J("ngClass",t.WLB(6,P,0!=s,0==s)),t.xp6(2),t.Gre("","product-"+s," productCheckbox"),t.s9C("id","product-"+s),t.xp6(3),t.Oqu(e.name_json&&e.name_json[o.selected_lang_code]?e.name_json[o.selected_lang_code]:e.name)}}function C(n,l){1&n&&t._UZ(0,"img",23)}function b(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t._uU(1,"\n  "),t.TgZ(2,"div",5),t._uU(3,"\n    "),t._UZ(4,"input",6),t._uU(5,"\n    "),t._UZ(6,"i",7),t._uU(7,"\n  "),t.qZA(),t._uU(8,"\n  "),t.YNc(9,f,9,6,"div",8),t._uU(10,"\n  "),t.TgZ(11,"div",9),t._uU(12,"\n    "),t.TgZ(13,"div",10),t._uU(14,"\n      "),t.TgZ(15,"div",11),t._uU(16,"\n        "),t.YNc(17,x,7,9,"div",12),t._uU(18,"\n        "),t.YNc(19,C,1,0,"img",13),t._uU(20,"\n      "),t.qZA(),t._uU(21,"\n    "),t.qZA(),t._uU(22,"\n  "),t.qZA(),t._uU(23,"\n  "),t.TgZ(24,"div",14),t._uU(25,"\n    "),t.TgZ(26,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.openListingDropDownDiv=!1,t.KtG(o.toggleSelectedProducts())}),t._uU(27),t.qZA(),t._uU(28,"\n  "),t.qZA(),t._uU(29,"\n"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("formControl",e.searchProductListValue),t.xp6(5),t.Q6J("ngIf",!e.searchProductListValue.value),t.xp6(8),t.Q6J("ngForOf",e.fetchAllProductList),t.xp6(2),t.Q6J("ngIf",e.showLoader),t.xp6(8),t.hij("\n      ",e.languageStrings.Close||"Close","\n    ")}}let v=(()=>{class n{constructor(e){this.commonService=e,this.ProductAPIResponse=null,this.showSelected=!1,this.to_be_remove_products_emitter=new t.vpe,this.to_be_add_products_emitter=new t.vpe,this.select_all_products_emitter=new t.vpe,this.getAllProducts_emitter=new t.vpe,this.productSelectedCount_emiiter=new t.vpe,this.to_be_add_products=[],this.items_present=!1,this.to_be_remove_products=[],this.tempTotalProduct=0,this.languageStrings={},this.select_all_products=0,this.openListingDropDownDiv=!1,this.searchProductListValue=new _.p4(""),this.productSelectedCount=0,this.showSelectedOnly=!1,this.commonService.langStringsPromise.then(()=>{this.languageStrings=this.commonService.accountTranslationsList})}ngOnChanges(e){e.ProductAPIResponse&&this.openListingDropDownDiv&&(this.forEdit&&this.openListingDropDownDiv&&!this.selectAllProductList?setTimeout(()=>{this.ProductAPIResponse.forEach((s,o)=>{let i=this.to_be_remove_products.indexOf(s.product_id),c=this.to_be_add_products.indexOf(s.product_id);document.getElementById("product-"+(o+this.fetchAllProductList.length-this.ProductAPIResponse.length)).checked=!((i>-1||!s.is_selected)&&!(c>-1))})},0):setTimeout(()=>{this.ProductAPIResponse.forEach((s,o)=>{let i=this.to_be_add_products.indexOf(s.product_id);document.getElementById("product-"+(o+this.fetchAllProductList.length-this.ProductAPIResponse.length)).checked=!!(i>-1||this.selectAllProductList)})},0)),(this.selectedMerchantId&&!this.searchProductListValue.value||!this.tempTotalProduct)&&!this.showLoader&&(this.tempTotalProduct=this.totalProduct),this.selectedMerchantId&&!this.searchProductListValue&&this.changeCheckboxData(!1)}ngOnInit(){this.searchProductListValue.valueChanges.pipe((0,p.b)(500)).subscribe(e=>{this.start=0,this.selectedMerchantId=0,this.getAllProducts_emitter.emit({sString:this.searchProductListValue.value})}),this.productSelectedCount=!this.dataList||this.selectedMerchantId&&this.selectedMerchantId!=this.dataList.store_id||!this.forEdit?0:this.dataList.mapped_product_count,this.productSelectedCount_emiiter.emit(this.productSelectedCount),this.showLoader||(this.tempTotalProduct=this.totalProduct),this.selected_lang_code=this.commonService.loginData.language||"en",this.items_present=this.productSelectedCount>0}handleScroll(){const e=document.getElementById("scrollWindow");(e.scrollHeight||e.scrollHeight)-(e.scrollTop||e.scrollTop)-(e.clientHeight||e.clientHeight)<50&&!this.showLoader&&this.start<=this.totalProduct&&(this.start+=10,this.getAllProducts_emitter.emit({start:this.start,sString:this.searchProductListValue.value}))}openListingDropDown(){this.openListingDropDownDiv=!!this.fetchAllProductList,setTimeout(()=>{this.forEdit&&0==this.select_all_products&&this.fetchAllProductList.forEach((o,i)=>{this.to_be_remove_products.indexOf(o.product_id)>-1||!o.is_selected||(document.getElementById(`product-${i}`).checked=!0)}),1==this.select_all_products&&(this.fetchAllProductList.forEach((o,i)=>{let c=document.getElementById(`product-${i}`);c.checked=!c.checked}),this.fetchAllProductList.forEach((o,i)=>{if(this.to_be_remove_products.indexOf(o.product_id)>-1){let d=document.getElementById(`product-${i}`);d.checked=!d.checked}})),this.fetchAllProductList.forEach((o,i)=>{if(this.to_be_add_products.indexOf(o.product_id)>-1){let d=document.getElementById(`product-${i}`);d.checked=!d.checked}}),document.getElementById("scrollWindow").addEventListener("scroll",this.handleScroll.bind(this))},100),this.sendDataToParent()}closeProductListDiv(){this.openListingDropDownDiv=!1,this.start=0,this.fetchAllProductList=this.fetchAllProductList.slice(0,10),this.selectAllProductList=!1,this.to_be_add_products=[],this.to_be_remove_products=[],this.selectedMerchantId=0,this.select_all_products=0,this.tempTotalProduct=0,this.showSelected&&(this.showSelectedOnly=!1,this.getAllProducts_emitter.emit({discounted_products:!1})),this.sendDataToParent()}toggleSelectedProducts(e){this.showSelected&&(this.start=0,this.showSelectedOnly=!!e&&e.target.checked,this.getAllProducts_emitter.emit(e?{discounted_products:e.target.checked}:{discounted_products:!1}))}SelectUnselectProduct(e,s){let o=document.getElementById(`product-${s}`);if(this.productSelectedCount=this.productSelectedCount?this.productSelectedCount:0,this.selectAllProductList){let i=this.to_be_remove_products.indexOf(e.product_id);i>-1?this.to_be_remove_products.splice(i,1):this.to_be_remove_products.push(e.product_id)}else if(this.forEdit){if(this.forEdit)if(this.fetchAllProductList.findIndex(c=>c.product_id===e.product_id&&c.is_selected)>-1){let c=this.to_be_remove_products.indexOf(e.product_id);c>-1?this.to_be_remove_products.splice(c,1):this.to_be_remove_products.push(e.product_id)}else{let c=this.to_be_add_products.indexOf(e.product_id);c>-1?this.to_be_add_products.splice(c,1):this.to_be_add_products.push(e.product_id)}}else{let i=this.to_be_add_products.indexOf(e.product_id);i>-1?this.to_be_add_products.splice(i,1):this.to_be_add_products.push(e.product_id)}o.checked=!o.checked,o.checked?this.productSelectedCount++:this.productSelectedCount--,this.sendDataToParent()}selectAll(){this.select_all_products=1,this.changeCheckboxData(!0),this.selectAllProductList=!0,this.to_be_add_products=[],this.to_be_remove_products=[],this.productSelectedCount=this.totalProduct,this.sendDataToParent()}changeCheckboxData(e){this.fetchAllProductList.forEach((s,o)=>{let i=document.getElementById(`product-${o}`);this.fetchAllProductList[o].is_selected=e,i.checked=e})}sendDataToParent(){this.to_be_add_products_emitter.emit(this.to_be_add_products),this.to_be_remove_products_emitter.emit(this.to_be_remove_products),this.select_all_products_emitter.emit(this.select_all_products),this.productSelectedCount_emiiter.emit(this.productSelectedCount)}ngOnDestroy(){this.merchantChangedSubscription&&this.merchantChangedSubscription.unsubscribe()}static#t=this.\u0275fac=function(s){return new(s||n)(t.Y36(g.v))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-multiselect"]],inputs:{fetchAllProductList:"fetchAllProductList",ProductAPIResponse:"ProductAPIResponse",showSelected:"showSelected",totalProduct:"totalProduct",forEdit:"forEdit",showLoader:"showLoader",stoppagination:"stoppagination",start:"start",selectedMerchantId:"selectedMerchantId",dataList:"dataList"},outputs:{to_be_remove_products_emitter:"to_be_remove_products_emitter",to_be_add_products_emitter:"to_be_add_products_emitter",select_all_products_emitter:"select_all_products_emitter",getAllProducts_emitter:"getAllProducts_emitter",productSelectedCount_emiiter:"productSelectedCount_emiiter"},features:[t.TTD],decls:8,vars:2,consts:[["class","div-listing-product",4,"ngIf"],[1,"col-lg-12","col-sm-12","col-md-12","col-xs-12","flexClass","padddingZero",3,"click"],["readonly","",1,"form-control","productSearchBar",3,"placeholder"],[1,"fa","fa-angle-down","absoulteFaFa"],[1,"div-listing-product"],[1,"col-sm-12","col-md-12","col-xs-12","flexClass","padddingZero","borderClass"],["placeholder","Search",1,"form-control","paddingSixteen",2,"border","none",3,"formControl"],[1,"fa","fa-search","flexFaFa"],["class","col-sm-12 col-md-12 col-xs-12 flexClass padddingZero borderClass",4,"ngIf"],[1,"col-lg-12","col-sm-12","col-md-12","col-xs-12","flexClass","padddingZero",2,"border-bottom","1px solid #eee"],["id","scrollWindow",1,"col-lg-12","col-sm-12","col-md-12","col-xs-12","paddingSixteen","padddingZero","heightSet",2,"border-right","1px solid #eee"],[1,"flexClass","flexDirecation"],["class","flexClass  flexArrow borderBottomDash",3,"ngClass","click",4,"ngFor","ngForOf"],["class","loaderProducts","src","assets/images/loader.gif","alt","",4,"ngIf"],[1,"col-lg-12","col-sm-12","col-md-12","col-xs-12","flexClass","cancelPadding"],["type","button",1,"btn","btn-yl-secondary","widthSetCancel",3,"click"],[1,"col-lg-6","col-sm-6","col-md-6","col-xs-6","padddingZero","paddingSixteen"],["type","checkbox",1,"checkboxNew",3,"ngModel","ngModelOptions","disabled","ngModelChange","change"],["class","col-lg-6 col-sm-6 col-md-6 col-xs-6 padddingZero paddingSixteen",4,"ngIf"],["type","checkbox",1,"checkboxNew",3,"ngModel","ngModelOptions","ngModelChange","change"],[1,"flexClass","flexArrow","borderBottomDash",3,"ngClass","click"],["type","checkbox",2,"pointer-events","none",3,"id"],[1,"marginLeft"],["src","assets/images/loader.gif","alt","",1,"loaderProducts"]],template:function(s,o){1&s&&(t.YNc(0,b,30,5,"div",0),t._uU(1,"\n"),t.TgZ(2,"div",1),t.NdJ("click",function(){return o.openListingDropDown()}),t._uU(3,"\n\n  "),t._UZ(4,"input",2),t._uU(5,"\n  "),t._UZ(6,"i",3),t._uU(7,"\n"),t.qZA()),2&s&&(t.Q6J("ngIf",o.openListingDropDownDiv),t.xp6(4),t.s9C("placeholder",o.productSelectedCount&&o.tempTotalProduct?o.productSelectedCount+" out of "+(o.tempTotalProduct||o.totalProduct)+" selected":"Choose "+o.commonService.loginData.terminology.PRODUCT))},dependencies:[a.mk,a.sg,a.O5,_.Fj,_.Wl,_.JJ,_.On,_.oH],styles:[".div-listing-product[_ngcontent-%COMP%]{height:auto;max-height:465px;background-color:#fff;box-shadow:0 1px 3px #0000004d;margin-left:2px;position:absolute;width:100%;z-index:999}.flexClass[_ngcontent-%COMP%]{display:flex}.flexDirecation[_ngcontent-%COMP%]{flex-direction:column}.checkboxset[_ngcontent-%COMP%]{padding:0!important;width:18px!important}.marginLeft[_ngcontent-%COMP%]{width:100%;cursor:pointer}.colorGreen[_ngcontent-%COMP%]{color:green}.colorRed[_ngcontent-%COMP%]{color:red}.padddingZero[_ngcontent-%COMP%]{padding:0}.widthSetCancel[_ngcontent-%COMP%]{width:100%;border-radius:0!important}.widthSetApply[_ngcontent-%COMP%]{width:100%;cursor:pointer}.borderClass[_ngcontent-%COMP%]{border:1px solid #eee}.paddingSixteen[_ngcontent-%COMP%]{padding:8px!important;font-size:15px;box-shadow:none!important}.heightSet[_ngcontent-%COMP%]{max-height:217px;overflow:scroll;overflow-x:hidden}.marginTopSix[_ngcontent-%COMP%]{margin-top:6px}.flexFaFa[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-right:10px}.applyPadding[_ngcontent-%COMP%], .cancelPadding[_ngcontent-%COMP%]{padding:10px 16px}.absoulteFaFa[_ngcontent-%COMP%]{position:absolute;right:9px;top:8px;font-size:23px;font-weight:600;color:#9b9b9b}.borderbottomNone[_ngcontent-%COMP%]{border:none!important}.marginSix[_ngcontent-%COMP%]{margin-top:6px;padding-bottom:6px}.marginBottom[_ngcontent-%COMP%]{padding-bottom:6px}.flexArrow[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.checkboxNew[_ngcontent-%COMP%]{width:20px!important;margin-left:5px!important}.productCheckbox[_ngcontent-%COMP%]{width:30px!important}.loaderProducts[_ngcontent-%COMP%]{height:20px;width:20px;position:relative;left:50%}.heightSet[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.heightSet[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#888;border-radius:4px}.heightSet[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#555}.productSearchBar[_ngcontent-%COMP%]{box-shadow:none}.dropDownOpen[_ngcontent-%COMP%]:disabled{background-color:#fff!important;border:1px solid var(--gray-dark)!important;cursor:default!important}.dropDownOpen[_ngcontent-%COMP%]::placeholder{color:#000!important}.productDropDown[_ngcontent-%COMP%]{position:relative}"]})}return n})()}}]);